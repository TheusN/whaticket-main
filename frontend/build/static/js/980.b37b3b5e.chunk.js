"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[980],{3863:(e,t,a)=>{a.d(t,{A:()=>i});a(9950);var r=a(39886),n=a(44414);function i(e){return(0,n.jsx)(r.A,{variant:"h5",color:"primary",gutterBottom:!0,children:e.children})}},17963:(e,t,a)=>{var r=a(24994),n=a(6305);t.A=void 0;var i=n(a(9950)),c=(0,r(a(53209)).default)(i.createElement(i.Fragment,null,i.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),i.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})),"Schedule");t.A=c},30483:(e,t,a)=>{var r=a(24994),n=a(6305);t.A=void 0;var i=n(a(9950)),c=(0,r(a(53209)).default)(i.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");t.A=c},38847:(e,t,a)=>{a.d(t,{A:()=>c});a(9950);var r=a(69994),n=a(44414);const i=(0,r.A)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}})),c=e=>{let{children:t}=e;const a=i();return(0,n.jsx)("div",{className:a.contactsHeader,children:t})}},46561:(e,t,a)=>{var r=a(24994),n=a(6305);t.A=void 0;var i=n(a(9950)),c=(0,r(a(53209)).default)(i.createElement("path",{d:"M16.53 11.06L15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17l5.94-5.94zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"}),"EventAvailable");t.A=c},78980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(89379),n=a(9950),i=a(16673),c=a(69994),o=a(77882),s=a(86505),l=a(38847),d=a(3863),m=a(32988),u=a(39886),h=a(58168),p=a(80045),f=a(2803),A=a(52521),g=a(64620),v=a(37751),x=a(14602),b=n.forwardRef(function(e,t){var a=e.classes,r=e.className,i=e.color,c=void 0===i?"primary":i,o=e.value,s=e.valueBuffer,l=e.variant,d=void 0===l?"indeterminate":l,m=(0,p.A)(e,["classes","className","color","value","valueBuffer","variant"]),u=(0,x.A)(),g={},v={bar1:{},bar2:{}};if("determinate"===d||"buffer"===d)if(void 0!==o){g["aria-valuenow"]=Math.round(o),g["aria-valuemin"]=0,g["aria-valuemax"]=100;var b=o-100;"rtl"===u.direction&&(b=-b),v.bar1.transform="translateX(".concat(b,"%)")}else 0;if("buffer"===d)if(void 0!==s){var j=(s||0)-100;"rtl"===u.direction&&(j=-j),v.bar2.transform="translateX(".concat(j,"%)")}else 0;return n.createElement("div",(0,h.A)({className:(0,f.A)(a.root,a["color".concat((0,A.A)(c))],r,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[d]),role:"progressbar"},g,{ref:t},m),"buffer"===d?n.createElement("div",{className:(0,f.A)(a.dashed,a["dashedColor".concat((0,A.A)(c))])}):null,n.createElement("div",{className:(0,f.A)(a.bar,a["barColor".concat((0,A.A)(c))],("indeterminate"===d||"query"===d)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[d]),style:v.bar1}),"determinate"===d?null:n.createElement("div",{className:(0,f.A)(a.bar,("indeterminate"===d||"query"===d)&&a.bar2Indeterminate,"buffer"===d?[a["color".concat((0,A.A)(c))],a.bar2Buffer]:a["barColor".concat((0,A.A)(c))]),style:v.bar2}))});const j=(0,g.A)(function(e){var t=function(t){return"light"===e.palette.type?(0,v.a)(t,.62):(0,v.e$)(t,.5)},a=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}},{name:"MuiLinearProgress"})(b);var y=a(45530),z=a(41397),S=a(95888),C=a(45406),k=a(73094),E=a(20906),N=a(60643),R=a(44414);const I=(0,c.A)(e=>({cardAvatar:{fontSize:"55px",color:N.A[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:e.palette.text.primary},cardSubtitle:{color:N.A[600],fontSize:"14px"}}));function w(e){const{icon:t,title:a,value:r,loading:n}=e,i=I();return n?(0,R.jsx)(E.A,{variant:"rect",height:80}):(0,R.jsx)(S.A,{children:(0,R.jsx)(C.A,{avatar:(0,R.jsx)(k.A,{className:i.cardAvatar,children:t}),title:(0,R.jsx)(u.A,{variant:"h6",component:"h2",className:i.cardTitle,children:a}),subheader:(0,R.jsx)(u.A,{variant:"subtitle1",component:"p",className:i.cardSubtitle,children:r})})})}var L=a(30483),M=a(17963),P=a(46561),H=a(80684),V=a(97908),D=a(94039),B=a(77222),T=a(23665),q=a(33906);const W=(0,c.A)(e=>({mainPaper:(0,r.A)({flex:1,padding:e.spacing(2),overflowY:"scroll"},e.scrollbarStyles),textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)}})),$=()=>{const e=W(),{campaignId:t}=(0,i.useParams)(),[a,r]=(0,n.useState)({}),[c,h]=(0,n.useState)(0),[p,f]=(0,n.useState)(0),[A,g]=(0,n.useState)(0),[v,x]=(0,n.useState)(!1),b=(0,n.useRef)(!0),{datetimeToClient:S}=(0,B.S)(),C=(0,n.useContext)(T.d);(0,n.useEffect)(()=>(b.current&&k(),()=>{b.current=!1}),[]),(0,n.useEffect)(()=>{if(b.current&&(0,z.has)(a,"shipping")){if((0,z.has)(a,"contactList")){const e=(0,z.get)(a,"contactList");if(!e)return;const t=e.contacts.filter(e=>e.isWhatsappValid);h(t.length)}if((0,z.has)(a,"shipping")){const e=(0,z.get)(a,"shipping");if(!e)return;const t=e.filter(e=>!(0,z.isNull)(e.deliveredAt));f(t.length)}}},[a]),(0,n.useEffect)(()=>{g(p/c*100)},[p,c]),(0,n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=C.getSocket(e);return a.on("company-".concat(e,"-campaign"),e=>{e.record.id===+t&&(r(e.record),"FINALIZADA"===e.record.status&&setTimeout(()=>{k()},5e3))}),()=>{a.disconnect()}},[t,C]);const k=async()=>{x(!0);const{data:e}=await y.A.get("/campaigns/".concat(t));r(e),x(!1)};return(0,R.jsxs)(s.A,{children:[(0,R.jsx)(l.A,{children:(0,R.jsx)(m.A,{style:{width:"99.6%"},container:!0,children:(0,R.jsx)(m.A,{xs:12,item:!0,children:(0,R.jsxs)(d.A,{children:[q.R.t("campaigns.report.title")," ",a.name||q.R.t("campaigns.report.title2")]})})})}),(0,R.jsxs)(o.A,{className:e.mainPaper,variant:"outlined",children:[(0,R.jsxs)(u.A,{variant:"h6",component:"h2",children:["Status: ",(e=>{switch(e){case"INATIVA":return q.R.t("campaigns.status.inactive");case"PROGRAMADA":return q.R.t("campaigns.status.programmed");case"EM_ANDAMENTO":return q.R.t("campaigns.status.inProgress");case"CANCELADA":return q.R.t("campaigns.status.canceled");case"FINALIZADA":return q.R.t("campaigns.status.finished");default:return e}})(a.status)," ",p," ",q.R.t("campaigns.report.of")," ",c]}),(0,R.jsxs)(m.A,{spacing:2,container:!0,children:[(0,R.jsx)(m.A,{xs:12,item:!0,children:(0,R.jsx)(j,{variant:"determinate",style:{height:15,borderRadius:3,margin:"20px 0"},value:A})}),(0,R.jsx)(m.A,{xs:12,md:4,item:!0,children:(0,R.jsx)(w,{icon:(0,R.jsx)(L.A,{fontSize:"inherit"}),title:q.R.t("campaigns.report.validContacts"),value:c,loading:v})}),(0,R.jsx)(m.A,{xs:12,md:4,item:!0,children:(0,R.jsx)(w,{icon:(0,R.jsx)(H.A,{fontSize:"inherit"}),title:q.R.t("campaigns.report.delivered"),value:p,loading:v})}),a.whatsappId&&(0,R.jsx)(m.A,{xs:12,md:4,item:!0,children:(0,R.jsx)(w,{icon:(0,R.jsx)(V.A,{fontSize:"inherit"}),title:q.R.t("campaigns.report.connection"),value:a.whatsapp.name,loading:v})}),a.contactListId&&(0,R.jsx)(m.A,{xs:12,md:4,item:!0,children:(0,R.jsx)(w,{icon:(0,R.jsx)(D.A,{fontSize:"inherit"}),title:q.R.t("campaigns.report.contactList"),value:a.contactList.name,loading:v})}),(0,R.jsx)(m.A,{xs:12,md:4,item:!0,children:(0,R.jsx)(w,{icon:(0,R.jsx)(M.A,{fontSize:"inherit"}),title:q.R.t("campaigns.report.schedule"),value:S(a.scheduledAt),loading:v})}),(0,R.jsx)(m.A,{xs:12,md:4,item:!0,children:(0,R.jsx)(w,{icon:(0,R.jsx)(P.A,{fontSize:"inherit"}),title:q.R.t("campaigns.report.conclusion"),value:S(a.completedAt),loading:v})})]})]})]})}},80684:(e,t,a)=>{var r=a(24994),n=a(6305);t.A=void 0;var i=n(a(9950)),c=(0,r(a(53209)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.A=c},86505:(e,t,a)=>{a.d(t,{A:()=>o});a(9950);var r=a(69994),n=a(54742),i=a(44414);const c=(0,r.A)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}})),o=e=>{let{children:t}=e;const a=c();return(0,i.jsx)(n.A,{className:a.mainContainer,children:(0,i.jsx)("div",{className:a.contentWrapper,children:t})})}},94039:(e,t,a)=>{var r=a(24994),n=a(6305);t.A=void 0;var i=n(a(9950)),c=(0,r(a(53209)).default)(i.createElement("path",{d:"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt");t.A=c},97908:(e,t,a)=>{var r=a(24994),n=a(6305);t.A=void 0;var i=n(a(9950)),c=(0,r(a(53209)).default)(i.createElement("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}),"WhatsApp");t.A=c}}]);