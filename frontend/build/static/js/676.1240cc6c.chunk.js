"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[676],{3863:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);var a=n(39886),r=n(44414);function i(e){return(0,r.jsx)(a.A,{variant:"h5",color:"primary",gutterBottom:!0,children:e.children})}},38847:(e,t,n)=>{n.d(t,{A:()=>s});n(9950);var a=n(69994),r=n(44414);const i=(0,a.A)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}})),s=e=>{let{children:t}=e;const n=i();return(0,r.jsx)("div",{className:n.contactsHeader,children:t})}},39655:(e,t,n)=>{n.d(t,{A:()=>s});n(9950);var a=n(69994),r=n(44414);const i=(0,a.A)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}})),s=e=>{let{children:t}=e;const n=i();return(0,r.jsx)("div",{className:n.MainHeaderButtonsWrapper,children:t})}},39838:(e,t,n)=>{n.d(t,{A:()=>Ie});var a=n(9950),r=n(69994),i=n(46493),s=n(18028),c=n(77766),o=n(89379),l=n(39886),d=n(25274),u=n(81704),m=n(84208),p=n(52816),g=n(80892),h=n(6443),x=n(32988),f=n(80045),y=n(41397),v=n(32018),A=n(44414);const j=["errorText"];function b(e){const{errorText:t}=e,n=(0,f.A)(e,j),[a,r]=(0,h.Mt)(e);return(0,A.jsx)(v.A,(0,o.A)((0,o.A)({type:"text",error:r.touched&&r.error&&!0,helperText:function(){const[e,t]=(0,y.at)(r,"touched","error");if(e&&t)return t}()},a),n))}var P=n(87650),R=n(12630),k=n(57513),S=n(7692),w=n(39884);const N=["label","data"];function C(e){const{label:t,data:n}=e,a=(0,f.A)(e,N),[r,i]=(0,h.Mt)(e),{value:s}=r,[c,l]=(0,y.at)(i,"touched","error"),d=c&&l&&!0;return(0,A.jsxs)(R.A,(0,o.A)((0,o.A)({},a),{},{error:d,children:[(0,A.jsx)(k.A,{children:t}),(0,A.jsx)(S.A,(0,o.A)((0,o.A)({},r),{},{value:s||"",children:n.map((e,t)=>(0,A.jsx)(w.A,{value:e.value,children:e.label},t))})),function(){if(d)return(0,A.jsx)(P.A,{children:l})}()]}))}C.defaultProps={data:[]};const E=C;n(79847);var D=n(18957);const q=[{value:"BR",label:"Brasil"},{value:"usa",label:"United States"}];function M(e){const{user:t}=(0,a.useContext)(D.c),[n,r]=(0,a.useState)(t.company.billingName),[i,s]=(0,a.useState)(t.company.addressZipCode),[c,o]=(0,a.useState)(t.company.addressStreet),[d,u]=(0,a.useState)(t.company.addressState),[m,p]=(0,a.useState)(t.company.addressCity),[g,h]=(0,a.useState)(t.company.addressDistrict),{formField:{firstName:f,address1:y,city:v,state:j,zipcode:P,country:R},setFieldValue:k}=e;return(0,a.useEffect)(()=>{k("firstName",n),k("zipcode",i),k("address2",c),k("state",d),k("city",m),k("country",g)},[]),(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Vamos precisar de algumas informa\xe7\xf5es"}),(0,A.jsxs)(x.A,{container:!0,spacing:3,children:[(0,A.jsx)(x.A,{item:!0,xs:6,sm:6,children:(0,A.jsx)(b,{name:f.name,label:f.label,fullWidth:!0,value:n,onChange:e=>{r(e.target.value),k("firstName",e.target.value)}})}),(0,A.jsx)(x.A,{item:!0,xs:6,sm:6,children:(0,A.jsx)(E,{name:R.name,label:R.label,data:q,fullWidth:!0,value:g,onChange:e=>{h(e.target.value),k("country",e.target.value)}})}),(0,A.jsx)(x.A,{item:!0,xs:4,children:(0,A.jsx)(b,{name:P.name,label:P.label,fullWidth:!0,value:i,onChange:e=>{s(e.target.value),k("zipcode",e.target.value)}})}),(0,A.jsx)(x.A,{item:!0,xs:8,children:(0,A.jsx)(b,{name:y.name,label:y.label,fullWidth:!0,value:c,onChange:e=>{o(e.target.value),k("address2",e.target.value)}})}),(0,A.jsx)(x.A,{item:!0,xs:4,children:(0,A.jsx)(b,{name:j.name,label:j.label,fullWidth:!0,value:d,onChange:e=>{u(e.target.value),k("state",e.target.value)}})}),(0,A.jsx)(x.A,{item:!0,xs:8,children:(0,A.jsx)(b,{name:v.name,label:v.label,fullWidth:!0,value:m,onChange:e=>{p(e.target.value),k("city",e.target.value)}})})]})]})}var T=n(95888),I=n(84494),F=n(24910),z=n(45406),O=n(8816),B=n(65774),W=n(53057),L=n(33906);const V=(0,r.A)(e=>({"@global":{ul:{margin:0,padding:0,listStyle:"none"}},margin:{margin:e.spacing(1)},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},footer:{borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),[e.breakpoints.up("sm")]:{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)}},customCard:{display:"flex",marginTop:"16px",alignItems:"center",flexDirection:"column"},custom:{display:"flex",alignItems:"center",justifyContent:"space-between"}}));function Y(e){const{setFieldValue:t,setActiveStep:n,activeStep:r}=e,{list:i,finder:s}=(0,B.A)(),{find:c}=(0,W.A)(),o=V(),[d,u]=a.useState(3),[m,g]=(0,a.useState)(0),[h,f]=a.useState(3),[y,v]=a.useState([]),[j,b]=a.useState(49),[P,R]=a.useState(!1),k=localStorage.getItem("companyId");(0,a.useEffect)(()=>{!async function(){await S()}()},[]);const S=async()=>{R(!0);try{const e=await c(k);g(e.planId),await w(e.planId)}catch(e){console.log(e)}R(!1)},w=async e=>{R(!0);try{const t=await s(e),n=[];n.push({title:t.name,planId:t.id,price:t.value,description:["".concat(t.users," ").concat(L.R.t("checkoutPage.pricing.users")),"".concat(t.connections," ").concat(L.R.t("checkoutPage.pricing.connection")),"".concat(t.queues," ").concat(L.R.t("checkoutPage.pricing.queues"))],users:t.users,connections:t.connections,queues:t.queues,buttonText:L.R.t("checkoutPage.pricing.SELECT"),buttonVariant:"outlined"}),v(n)}catch(t){console.log(t)}R(!1)},N=y;return(0,A.jsx)(a.Fragment,{children:(0,A.jsx)(x.A,{container:!0,spacing:3,children:N.map(e=>(0,A.jsx)(x.A,{item:!0,xs:12,sm:(e.title,12),md:12,children:(0,A.jsxs)(T.A,{children:[(0,A.jsx)(z.A,{title:e.title,subheader:e.subheader,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},action:"Pro"===e.title?(0,A.jsx)(O.A,{}):null,className:o.cardHeader}),(0,A.jsxs)(F.A,{children:[(0,A.jsxs)("div",{className:o.cardPricing,children:[(0,A.jsx)(l.A,{component:"h2",variant:"h3",color:"textPrimary",children:(0,A.jsxs)(a.Fragment,{children:["R$",e.price.toLocaleString("pt-br",{minimumFractionDigits:2})]})}),(0,A.jsxs)(l.A,{variant:"h6",color:"textSecondary",children:["/",L.R.t("checkoutPage.pricing.month")]})]}),(0,A.jsx)("ul",{children:e.description.map(e=>(0,A.jsx)(l.A,{component:"li",variant:"subtitle1",align:"center",children:e},e))})]}),(0,A.jsx)(I.A,{children:(0,A.jsx)(p.A,{fullWidth:!0,variant:e.buttonVariant,color:"primary",onClick:()=>{e.custom?t("plan",JSON.stringify({users:d,connections:h,price:j})):t("plan",JSON.stringify(e)),n(r+1)},children:e.buttonText})})]})},e.title))})})}const H=(0,r.A)(e=>({listItem:{padding:e.spacing(1,0)},total:{fontWeight:"700"},title:{marginTop:e.spacing(2)}}));const U=function(e){const{formValues:t}=e,n=H(),{plan:a}=t,r=JSON.parse(a),{users:i,connections:s,price:c}=r;return(0,A.jsxs)(x.A,{item:!0,xs:12,sm:12,children:[(0,A.jsx)(l.A,{variant:"h6",gutterBottom:!0,className:n.title,children:L.R.t("checkoutPage.review.details")}),(0,A.jsxs)(l.A,{gutterBottom:!0,children:[L.R.t("checkoutPage.review.users"),": ",i]}),(0,A.jsxs)(l.A,{gutterBottom:!0,children:[L.R.t("checkoutPage.review.whatsapp"),": ",s]}),(0,A.jsx)(l.A,{gutterBottom:!0,children:L.R.t("checkoutPage.review.charges")}),(0,A.jsxs)(l.A,{gutterBottom:!0,children:[L.R.t("checkoutPage.review.total"),": R$",c.toLocaleString("pt-br",{minimumFractionDigits:2})]})]})};const G=function(){const{values:e}=(0,h.j7)();return(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:L.R.t("checkoutPage.review.title")}),(0,A.jsx)(x.A,{container:!0,spacing:2,children:(0,A.jsx)(U,{formValues:e})})]})};var J,_,$,K,Q=n(16673),X=n(48400),Z=n(57528),ee=n(19335);ee.default.div(J||(J=(0,Z.A)(["\n  footer {\n    margin-top: 30px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n\n    @media (max-width: 768px) {\n      flex-direction: column;\n      .checkout-buttons {\n        display: flex;\n        flex-direction: column-reverse;\n        width: 100%;\n\n        button {\n          width: 100%;\n          margin-top: 16px;\n          margin-left: 0;\n        }\n      }\n    }\n\n    button {\n      margin-left: 16px;\n    }\n  }\n"])));const te=ee.default.div(_||(_=(0,Z.A)(["\n  display: flex;\n  align-items: baseline;\n\n  span {\n    color: #333;\n    font-weight: bold;\n  }\n\n  strong {\n    color: #333;\n    font-size: 28px;\n    margin-left: 5px;\n  }\n\n  @media (max-width: 768px) {\n    min-width: 100%;\n    justify-content: space-between;\n  }\n"]))),ne=ee.default.div($||($=(0,Z.A)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  > h2 {\n    text-align: center;\n  }\n\n  > svg {\n    margin-top: 16px;\n  }\n\n  > span {\n    margin-top: 24px;\n    text-align: center;\n  }\n\n  > p,\n  strong {\n    margin-top: 8px;\n    font-size: 9px;\n    color: #999;\n  }\n\n  .copy-button {\n    font-size: 14px;\n    cursor: pointer;\n    text-align: center;\n    user-select: none;\n    min-height: 56px;\n    display: inline-flex;\n    -webkit-box-pack: center;\n    justify-content: center;\n    -webkit-box-align: center;\n    align-items: center;\n    background-color: #f9f9f9;\n    color: #000;\n    -webkit-appearance: none !important;\n    outline: none;\n    margin-top: 16px;\n    width: 256px;\n    font-weight: 600;\n    text-transform: uppercase;\n    border: none;\n\n    > span {\n      margin-right: 8px;\n    }\n  }\n"])));ee.default.div(K||(K=(0,Z.A)(["\n  width: 100%;\n  margin: 0 auto 0;\n  max-width: 1110px;\n  display: flex;\n  flex-direction: column;\n  -webkit-box-align: center;\n  align-items: center;\n  padding: 50px 95px;\n  background: #fff;\n  @media (max-width: 768px) {\n    padding: 16px 24px;\n"])));var ae=n(95189),re=n(44243),ie=n(23665),se=n(77222),ce=n(85923);const oe=function(e){const{pix:t}=e,[n]=(0,a.useState)(t.qrcode.qrcode),[r,i]=(0,a.useState)(!1),s=(0,Q.useHistory)(),{dateToClient:c}=(0,se.S)(),o=(0,a.useContext)(ie.d);return(0,a.useEffect)(()=>{const e=localStorage.getItem("companyId");o.getSocket(e).on("company-".concat(e,"-payment"),e=>{"CONCLUIDA"===e.action&&(ce.oR.success("Sua licen\xe7a foi renovada at\xe9 ".concat(c(e.company.dueDate),"!")),setTimeout(()=>{s.push("/")},4e3))})},[s,o]),(0,A.jsxs)(a.Fragment,{children:[(0,A.jsxs)(te,{children:[(0,A.jsx)("span",{children:"TOTAL"}),(0,A.jsxs)("strong",{children:["R$",t.valor.original.toLocaleString("pt-br",{minimumFractionDigits:2})]})]}),(0,A.jsxs)(ne,{children:[(0,A.jsx)(X.Ay,{value:n}),(0,A.jsx)(ae.CopyToClipboard,{text:n,onCopy:()=>{setTimeout(()=>{i(!1)},1e3),i(!0)},children:(0,A.jsx)("button",{className:"copy-button",type:"button",children:r?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:"Copiado"}),(0,A.jsx)(re.A7C,{size:18})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:"Copiar c\xf3digo QR"}),(0,A.jsx)(re.paH,{size:18})]})})}),(0,A.jsx)("span",{children:"Para finalizar, basta realizar o pagamento escaneando ou colando o c\xf3digo Pix acima :)"})]})]})};var le=n(45530),de=n(77534),ue=n(29714);const me={formId:"checkoutForm",formField:{firstName:{name:"firstName",label:L.R.t("checkoutPage.form.firstName.label"),requiredErrorMsg:L.R.t("checkoutPage.form.firstName.required")},lastName:{name:"lastName",label:L.R.t("checkoutPage.form.lastName.label"),requiredErrorMsg:L.R.t("checkoutPage.form.lastName.required")},address1:{name:"address2",label:L.R.t("checkoutPage.form.address1.label"),requiredErrorMsg:L.R.t("checkoutPage.form.address1.required")},city:{name:"city",label:L.R.t("checkoutPage.form.city.label"),requiredErrorMsg:L.R.t("checkoutPage.form.city.required")},state:{name:"state",label:L.R.t("checkoutPage.form.state.label"),requiredErrorMsg:L.R.t("checkoutPage.form.state.required")},zipcode:{name:"zipcode",label:L.R.t("checkoutPage.form.zipcode.label"),requiredErrorMsg:L.R.t("checkoutPage.form.zipcode.required"),invalidErrorMsg:L.R.t("checkoutPage.form.zipcode.invalid")},country:{name:"country",label:L.R.t("checkoutPage.form.country.label"),requiredErrorMsg:L.R.t("checkoutPage.form.country.required")},useAddressForPaymentDetails:{name:"useAddressForPaymentDetails",label:L.R.t("checkoutPage.form.useAddressForPaymentDetails.label")},invoiceId:{name:"invoiceId",label:L.R.t("checkoutPage.form.invoiceId.label")},nameOnCard:{name:"nameOnCard",label:L.R.t("checkoutPage.form.nameOnCard.label"),requiredErrorMsg:L.R.t("checkoutPage.form.nameOnCard.required")},cardNumber:{name:"cardNumber",label:L.R.t("checkoutPage.form.cardNumber.label"),requiredErrorMsg:L.R.t("checkoutPage.form.cardNumber.required"),invalidErrorMsg:L.R.t("checkoutPage.form.cardNumber.invalid")},expiryDate:{name:"expiryDate",label:L.R.t("checkoutPage.form.expiryDate.label"),requiredErrorMsg:L.R.t("checkoutPage.form.expiryDate.required"),invalidErrorMsg:L.R.t("checkoutPage.form.expiryDate.invalid")},cvv:{name:"cvv",label:L.R.t("checkoutPage.form.cvv.label"),requiredErrorMsg:L.R.t("checkoutPage.form.cvv.required"),invalidErrorMsg:L.R.t("checkoutPage.form.cvv.invalid")}}},{formField:{firstName:pe,address1:ge,city:he,zipcode:xe,country:fe}}=me,ye=[ue.Ik().shape({[pe.name]:ue.Yj().required("".concat(pe.requiredErrorMsg)),[ge.name]:ue.Yj().required("".concat(ge.requiredErrorMsg)),[he.name]:ue.Yj().nullable().required("".concat(he.requiredErrorMsg)),[xe.name]:ue.Yj().required("".concat(xe.requiredErrorMsg)),[fe.name]:ue.Yj().nullable().required("".concat(fe.requiredErrorMsg))})],{formField:{firstName:ve,lastName:Ae,address1:je,city:be,state:Pe,zipcode:Re,country:ke,useAddressForPaymentDetails:Se,nameOnCard:we,cardNumber:Ne,invoiceId:Ce,cvv:Ee}}=me,De={[ve.name]:"",[Ae.name]:"",[je.name]:"",[be.name]:"",[Pe.name]:"",[Re.name]:"",[ke.name]:"",[Se.name]:!1,[we.name]:"",[Ne.name]:"",[Ce.name]:"",[Ee.name]:""},qe=(0,r.A)(e=>({stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%"}}));n(48029);const Me=function(e){const t=[L.R.t("checkoutPage.steps.data"),L.R.t("checkoutPage.steps.customize"),L.R.t("checkoutPage.steps.review")],{formId:n,formField:r}=me,i=qe(),[s,c]=(0,a.useState)(1),[x,f]=(0,a.useState)(null),[y,v]=(0,a.useState)(e.Invoice.id),j=ye[s],b=s===t.length-1,{user:P}=(0,a.useContext)(D.c);function R(e,t,n,a){switch(e){case 0:return(0,A.jsx)(M,{formField:r,values:a,setFieldValue:t});case 1:return(0,A.jsx)(Y,{formField:r,setFieldValue:t,setActiveStep:n,activeStep:e,invoiceId:y,values:a});case 2:return(0,A.jsx)(G,{});default:return(0,A.jsx)("div",{children:"Not Found"})}}function k(){c(s-1)}return(0,A.jsxs)(a.Fragment,{children:[(0,A.jsx)(l.A,{component:"h1",variant:"h4",align:"center",children:L.R.t("checkoutPage.closeToEnd")}),(0,A.jsx)(d.A,{activeStep:s,className:i.stepper,children:t.map(e=>(0,A.jsx)(u.A,{children:(0,A.jsx)(m.A,{children:e})},e))}),(0,A.jsx)(a.Fragment,{children:s===t.length?(0,A.jsx)(oe,{pix:x}):(0,A.jsx)(h.l1,{initialValues:(0,o.A)((0,o.A)({},P),De),validationSchema:j,onSubmit:function(e,t){b?async function(e,t){try{const n=JSON.parse(e.plan),a={firstName:e.firstName,lastName:e.lastName,address2:e.address2,city:e.city,state:e.state,zipcode:e.zipcode,country:e.country,useAddressForPaymentDetails:e.useAddressForPaymentDetails,nameOnCard:e.nameOnCard,cardNumber:e.cardNumber,cvv:e.cvv,plan:e.plan,price:n.price,users:n.users,connections:n.connections,invoiceId:y},{data:r}=await le.A.post("/subscription",a);f(r),t.setSubmitting(!1),c(s+1),ce.oR.success(L.R.t("checkoutPage.success"))}catch(n){(0,de.A)(n)}}(e,t):(c(s+1),t.setTouched({}),t.setSubmitting(!1))},children:e=>{let{isSubmitting:t,setFieldValue:a,values:r}=e;return(0,A.jsxs)(h.lV,{id:n,children:[R(s,a,c,r),(0,A.jsxs)("div",{className:i.buttons,children:[1!==s&&(0,A.jsx)(p.A,{onClick:k,className:i.button,children:L.R.t("checkoutPage.BACK")}),(0,A.jsxs)("div",{className:i.wrapper,children:[1!==s&&(0,A.jsx)(p.A,{disabled:t,type:"submit",variant:"contained",color:"primary",className:i.button,children:b?L.R.t("checkoutPage.PAY"):L.R.t("checkoutPage.NEXT")}),t&&(0,A.jsx)(g.A,{size:24,className:i.buttonProgress})]})]})]})}})})]})},Te=(0,r.A)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:i.A[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),Ie=e=>{let{open:t,onClose:n,Invoice:r,contactId:i,initialValues:o,onSave:l}=e;const d=Te(),u=(0,a.useRef)(!0);(0,a.useEffect)(()=>()=>{u.current=!1},[]);return(0,A.jsx)("div",{className:d.root,children:(0,A.jsx)(s.A,{open:t,onClose:()=>{n()},maxWidth:"md",scroll:"paper",children:(0,A.jsx)(c.A,{dividers:!0,children:(0,A.jsx)(Me,{Invoice:r})})})})}},42239:(e,t,n)=>{n.d(t,{A:()=>l});n(9950);var a=n(5386),r=n(92560),i=n(20906),s=n(69994),c=n(44414);const o=(0,s.A)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}})),l=e=>{let{avatar:t,columns:n}=e;const s=o();return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(r.A,{children:[t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.A,{style:{paddingRight:0},children:(0,c.jsx)(i.A,{animation:"wave",variant:"circle",width:40,height:40})}),(0,c.jsx)(a.A,{children:(0,c.jsx)(i.A,{animation:"wave",height:30,width:80})})]}),Array.from({length:n},(e,t)=>(0,c.jsx)(a.A,{align:"center",children:(0,c.jsx)("div",{className:s.customTableCell,children:(0,c.jsx)(i.A,{align:"center",animation:"wave",height:30,width:80})})},t))]})})}},48029:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(89379),r=n(9950),i=(n(85923),n(69994)),s=n(77882),c=n(52816),o=n(49986),l=n(80158),d=n(5386),u=n(37874),m=n(92560),p=n(86505),g=n(38847),h=(n(39655),n(3863)),x=n(39838),f=n(45530),y=n(33906),v=n(42239),A=(n(43881),n(60995),n(77534)),j=n(59051),b=n.n(j),P=n(44414);const R=(e,t)=>{if("LOAD_INVOICES"===t.type){const n=t.payload,a=[];return n.forEach(t=>{const n=e.findIndex(e=>e.id===t.id);-1!==n?e[n]=t:a.push(t)}),[...e,...a]}if("UPDATE_USERS"===t.type){const n=t.payload,a=e.findIndex(e=>e.id===n.id);return-1!==a?(e[a]=n,[...e]):[n,...e]}if("DELETE_USER"===t.type){const n=t.payload,a=e.findIndex(e=>e.id===n);return-1!==a&&e.splice(a,1),[...e]}if("RESET"===t.type)return[]},k=(0,i.A)(e=>({mainPaper:(0,a.A)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)})),S=()=>{const e=k(),[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(1),[j,S]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[C,E]=(0,r.useReducer)(R,[]),[D,q]=r.useState([]),[M,T]=(0,r.useState)(null),[I,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{E({type:"RESET"}),i(1)},[w]),(0,r.useEffect)(()=>{n(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await f.A.get("/invoices/all",{params:{searchParam:w,pageNumber:a}});E({type:"LOAD_INVOICES",payload:e}),S(e.hasMore),n(!1)}catch(e){(0,A.A)(e)}})()},500);return()=>clearTimeout(e)},[w,a]);const z=e=>{const t=b()(b()()).format("DD/MM/yyyy"),n=b()(e.dueDate).format("DD/MM/yyyy");var a=b()(n,"DD/MM/yyyy").diff(b()(t,"DD/MM/yyyy"));if(b().duration(a).asDays()<0&&"paid"!==e.status)return{backgroundColor:"#ffbcbc9c"}},O=e=>{const t=b()(b()()).format("DD/MM/yyyy"),n=b()(e.dueDate).format("DD/MM/yyyy");var a=b()(n,"DD/MM/yyyy").diff(b()(t,"DD/MM/yyyy")),r=b().duration(a).asDays();return"paid"===e.status?y.R.t("invoices.paid"):r<0?y.R.t("invoices.expired"):y.R.t("invoices.open")};return(0,P.jsxs)(p.A,{children:[(0,P.jsx)(x.A,{open:I,onClose:()=>{T(null),F(!1)},"aria-labelledby":"form-dialog-title",Invoice:D,contactId:M}),(0,P.jsx)(g.A,{children:(0,P.jsx)(h.A,{children:y.R.t("invoices.title")})}),(0,P.jsx)(s.A,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!j||t)return;const{scrollTop:n,scrollHeight:a,clientHeight:r}=e.currentTarget;a-(n+100)<r&&i(e=>e+1)},children:(0,P.jsxs)(o.A,{size:"small",children:[(0,P.jsx)(u.A,{children:(0,P.jsxs)(m.A,{children:[(0,P.jsx)(d.A,{align:"center",children:"Id"}),(0,P.jsx)(d.A,{align:"center",children:y.R.t("invoices.details")}),(0,P.jsx)(d.A,{align:"center",children:y.R.t("invoices.value")}),(0,P.jsx)(d.A,{align:"center",children:y.R.t("invoices.dueDate")}),(0,P.jsx)(d.A,{align:"center",children:y.R.t("invoices.status")}),(0,P.jsx)(d.A,{align:"center",children:y.R.t("invoices.action")})]})}),(0,P.jsx)(l.A,{children:(0,P.jsxs)(P.Fragment,{children:[C.map(e=>(0,P.jsxs)(m.A,{style:z(e),children:[(0,P.jsx)(d.A,{align:"center",children:e.id}),(0,P.jsx)(d.A,{align:"center",children:e.detail}),(0,P.jsx)(d.A,{style:{fontWeight:"bold"},align:"center",children:e.value.toLocaleString("pt-br",{style:"currency",currency:"BRL"})}),(0,P.jsx)(d.A,{align:"center",children:b()(e.dueDate).format("DD/MM/YYYY")}),(0,P.jsx)(d.A,{style:{fontWeight:"bold"},align:"center",children:O(e)}),(0,P.jsx)(d.A,{align:"center",children:O(e)!==y.R.t("invoices.paid")?(0,P.jsx)(c.A,{size:"small",variant:"outlined",color:"secondary",onClick:()=>(e=>{q(e),T(null),F(!0)})(e),children:y.R.t("invoices.PAY")}):(0,P.jsx)(c.A,{size:"small",variant:"outlined",children:y.R.t("invoices.PAID")})})]},e.id)),t&&(0,P.jsx)(v.A,{columns:4})]})})]})})]})}},53057:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(45530);const r=()=>({save:async e=>{const{data:t}=await a.A.request({url:"/companies",method:"POST",data:e});return t},update:async e=>{const{data:t}=await a.A.request({url:"/companies/".concat(e.id),method:"PUT",data:e});return t},remove:async e=>{const{data:t}=await a.A.request({url:"/companies/".concat(e),method:"DELETE"});return t},list:async e=>{const{data:t}=await a.A.request({url:"/companies/list",method:"GET"});return t},find:async e=>{const{data:t}=await a.A.request({url:"/companies/".concat(e),method:"GET"});return t},finding:async e=>{const{data:t}=await a.A.request({url:"/companies/".concat(e),method:"GET"});return t},findAll:async e=>{const{data:t}=await a.A.request({url:"/companies",method:"GET"});return t},updateSchedules:async e=>{const{data:t}=await a.A.request({url:"/companies/".concat(e.id,"/schedules"),method:"PUT",data:e});return t}})},86505:(e,t,n)=>{n.d(t,{A:()=>c});n(9950);var a=n(69994),r=n(54742),i=n(44414);const s=(0,a.A)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}})),c=e=>{let{children:t}=e;const n=s();return(0,i.jsx)(r.A,{className:n.mainContainer,children:(0,i.jsx)("div",{className:n.contentWrapper,children:t})})}}}]);