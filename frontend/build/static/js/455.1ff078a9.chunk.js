"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[455],{47455:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ce});var i=a(89379),n=a(9950),r=a(77882),s=a(54742),o=a(32988),l=a(39884),d=a(12630),c=a(57513),h=a(7692),p=a(32018),x=a(87650),m=a(39886),g=a(82098),u=a(5676),f=a(25577),A=a(80684),j=a(1943),y=a(62261),b=a(69994),v=a(60643),k=a(95324),S=a(85923),F=a(39456),w=a(49986),R=a(80158),D=a(5386),C=a(87774),T=a(37874),P=a(92560),N=a(20906),M=a(46493),Y=a(15421),E=a(38674),H=a(59051),W=a.n(H),z=a(54115),I=a(33906),L=a(44414);const $=(0,b.A)(e=>({on:{color:M.A[600],fontSize:"20px"},off:{color:Y.A[600],fontSize:"20px"},pointer:{cursor:"pointer"}}));function B(e){let{rating:t}=e;const a=null===t?0:Math.trunc(t);return(0,L.jsx)(z.A,{defaultValue:a,max:3,readOnly:!0})}function O(e){const{loading:t,attendants:a}=e,i=$();return t?(0,L.jsx)(N.A,{variant:"rect",height:150}):(0,L.jsx)(C.A,{component:r.A,children:(0,L.jsxs)(w.A,{children:[(0,L.jsx)(T.A,{children:(0,L.jsxs)(P.A,{children:[(0,L.jsx)(D.A,{children:I.R.t("dashboard.onlineTable.name")}),(0,L.jsx)(D.A,{align:"center",children:I.R.t("dashboard.onlineTable.ratings")}),(0,L.jsx)(D.A,{align:"center",children:I.R.t("dashboard.onlineTable.avgSupportTime")}),(0,L.jsx)(D.A,{align:"center",children:I.R.t("dashboard.onlineTable.status")})]})}),(0,L.jsx)(R.A,{children:a.map((e,t)=>{return(0,L.jsxs)(P.A,{children:[(0,L.jsx)(D.A,{children:e.name}),(0,L.jsx)(D.A,{align:"center",title:I.R.t("dashboard.onlineTable.ratingLabel"),className:i.pointer,children:(0,L.jsx)(B,{rating:e.rating})}),(0,L.jsx)(D.A,{align:"center",children:(a=e.avgSupportTime,W()().startOf("day").add(a,"minutes").format("HH[h] mm[m]"))}),(0,L.jsx)(D.A,{align:"center",children:e.online?(0,L.jsx)(A.A,{className:i.on}):(0,L.jsx)(E.A,{className:i.off})})]},t);var a})})]})})}var _=a(41397),V=a(45530);const q=()=>({find:async e=>{const{data:t}=await V.A.request({url:"/dashboard",method:"GET",params:e});return t}});var G=a(77534);const U=e=>{let{searchParam:t,pageNumber:a,date:i,dateStart:r,dateEnd:s}=e;const[o,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),[x,m]=(0,n.useState)(0);return(0,n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await V.A.get("/contacts",{params:{searchParam:t,pageNumber:a,date:i,dateStart:r,dateEnd:s}});p(e.contacts),c(e.hasMore),m(e.count),l(!1)}catch(e){l(!1),(0,G.A)(e)}})()},500);return()=>clearTimeout(e)},[t,a,i,r,s]),{contacts:h,loading:o,hasMore:d,count:x}};var J=a(278),K=a(66187),Q=a(39709),X=a(2210),Z=a(14158),ee=a(81831),te=a(45154),ae=a(96184),ie=a(10226),ne=a(43974);(0,b.A)(e=>({container:{paddingTop:e.spacing(1),paddingBottom:e.padding,paddingLeft:e.spacing(1),paddingRight:e.spacing(2)}}));J.t1.register(J.PP,J.kc,J.E8,J.hE,J.m_,J.s$,Q.A);const re={responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:I.R.t("dashboard.charts.user.label"),position:"left"},datalabels:{display:!0,anchor:"start",offset:-30,align:"start",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,font:{size:20,weight:"bold"}}}},se=()=>{const[e,t]=(0,n.useState)(new Date),[a,i]=(0,n.useState)(new Date),[r,s]=(0,n.useState)({data:[]}),o=localStorage.getItem("companyId");(0,n.useEffect)(()=>{d()},[]);const l={labels:r&&(null===r||void 0===r?void 0:r.data.length)>0&&(null===r||void 0===r?void 0:r.data.map(e=>e.nome)),datasets:[{data:(null===r||void 0===r?void 0:r.data.length)>0&&(null===r||void 0===r?void 0:r.data.map((e,t)=>e.quantidade)),backgroundColor:"#2DDD7F"}]},d=async()=>{try{const{data:t}=await V.A.get("/dashboard/ticketsUsers?initialDate=".concat((0,ne.A)(e,"yyyy-MM-dd"),"&finalDate=").concat((0,ne.A)(a,"yyyy-MM-dd"),"&companyId=").concat(o));s(t)}catch(t){S.oR.error(I.R.t("dashboard.toasts.userChartError"))}};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(m.A,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:I.R.t("dashboard.charts.user.title")}),(0,L.jsxs)(ae.A,{direction:"row",spacing:2,alignItems:"center",sx:{my:2},children:[(0,L.jsx)(ee.$,{dateAdapter:X.h,adapterLocale:Z.A,children:(0,L.jsx)(te.l,{value:e,onChange:e=>{t(e)},label:I.R.t("dashboard.charts.user.start"),slotProps:{textField:{fullWidth:!0,sx:{width:"20ch"}}}})}),(0,L.jsx)(ee.$,{dateAdapter:X.h,adapterLocale:Z.A,children:(0,L.jsx)(te.l,{value:a,onChange:e=>{i(e)},label:I.R.t("dashboard.charts.user.end"),slotProps:{textField:{fullWidth:!0,sx:{width:"20ch"}}}})}),(0,L.jsx)(ie.A,{className:"buttonHover",onClick:d,variant:"contained",children:I.R.t("dashboard.charts.user.filter")})]}),(0,L.jsx)(K.yP,{options:re,data:l,style:{maxWidth:"100%",maxHeight:"280px"}})]})};J.t1.register(J.PP,J.kc,J.E8,J.hE,J.m_,J.s$);const oe={responsive:!0,plugins:{legend:{position:"top",display:!1},title:{display:!0,text:I.R.t("dashboard.charts.date.label"),position:"left"},datalabels:{display:!0,anchor:"start",offset:-30,align:"start",color:"#fff",textStrokeColor:"#000",textStrokeWidth:2,font:{size:20,weight:"bold"}}}},le=()=>{const[e,t]=(0,n.useState)(new Date),[a,i]=(0,n.useState)(new Date),[r,s]=(0,n.useState)({data:[],count:0}),o=localStorage.getItem("companyId");(0,n.useEffect)(()=>{d()},[]);const l={labels:r&&(null===r||void 0===r?void 0:r.data.length)>0&&(null===r||void 0===r?void 0:r.data.map(e=>e.hasOwnProperty("horario")?"Das ".concat(e.horario,":00 as ").concat(e.horario,":59"):e.data)),datasets:[{data:(null===r||void 0===r?void 0:r.data.length)>0&&(null===r||void 0===r?void 0:r.data.map((e,t)=>e.total)),backgroundColor:"#2DDD7F"}]},d=async()=>{try{const{data:t}=await V.A.get("/dashboard/ticketsDay?initialDate=".concat((0,ne.A)(e,"yyyy-MM-dd"),"&finalDate=").concat((0,ne.A)(a,"yyyy-MM-dd"),"&companyId=").concat(o));s(t)}catch(t){S.oR.error(I.R.t("dashboard.toasts.dateChartError"))}};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(m.A,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:[I.R.t("dashboard.charts.date.title")," (",null===r||void 0===r?void 0:r.count,")"]}),(0,L.jsxs)(ae.A,{direction:"row",spacing:2,alignItems:"center",sx:{my:2},children:[(0,L.jsx)(ee.$,{dateAdapter:X.h,adapterLocale:Z.A,children:(0,L.jsx)(te.l,{value:e,onChange:e=>{t(e)},label:I.R.t("dashboard.charts.date.start"),slotProps:{textField:{fullWidth:!0,sx:{width:"20ch"}}}})}),(0,L.jsx)(ee.$,{dateAdapter:X.h,adapterLocale:Z.A,children:(0,L.jsx)(te.l,{value:a,onChange:e=>{i(e)},label:I.R.t("dashboard.charts.date.end"),slotProps:{textField:{fullWidth:!0,sx:{width:"20ch"}}}})}),(0,L.jsx)(ie.A,{className:"buttonHover",onClick:d,variant:"contained",children:I.R.t("dashboard.charts.date.filter")})]}),(0,L.jsx)(K.yP,{options:oe,data:l,style:{maxWidth:"100%",maxHeight:"280px"}})]})},de=(0,b.A)(e=>({container:{paddingTop:e.spacing(1),paddingBottom:e.padding,paddingLeft:e.spacing(1),paddingRight:e.spacing(2)},fixedHeightPaper:(0,i.A)({padding:e.spacing(2),display:"flex",flexDirection:"column",height:240,overflowY:"auto"},e.scrollbarStyles),cardAvatar:{fontSize:"55px",color:v.A[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:k.A[700]},cardSubtitle:{color:v.A[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"},iframeDashboard:{width:"100%",height:"calc(100vh - 64px)",border:"none"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},customFixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:120},customFixedHeightPaperLg:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%"},card1:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card2:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card3:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card4:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card5:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card6:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card7:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card8:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},card9:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"dark"===e.palette.type?e.palette.boxticket.main:e.palette.primary.main,color:"#eee"},fixedHeightPaper2:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}})),ce=()=>{const e=de(),[t,a]=(0,n.useState)({}),[b,v]=(0,n.useState)([]),[k,w]=(0,n.useState)(0),[R,D]=(0,n.useState)(1),[C,T]=(0,n.useState)(W()("1","D").format("YYYY-MM-DD")),[P,N]=(0,n.useState)(W()().format("YYYY-MM-DD")),[M,Y]=(0,n.useState)(!1),{find:E}=q();async function H(){Y(!0);let e={};if(k>0&&(e={days:k}),!(0,_.isEmpty)(C)&&W()(C).isValid()&&(e=(0,i.A)((0,i.A)({},e),{},{date_from:W()(C).format("YYYY-MM-DD")})),!(0,_.isEmpty)(P)&&W()(P).isValid()&&(e=(0,i.A)((0,i.A)({},e),{},{date_to:W()(P).format("YYYY-MM-DD")})),0===Object.keys(e).length)return S.oR.error(I.R.t("dashboard.toasts.selectFilterError")),void Y(!1);const t=await E(e);a(t.counters),(0,_.isArray)(t.attendants)?v(t.attendants):v([]),Y(!1)}function z(e){return W()().startOf("day").add(e,"minutes").format("HH[h] mm[m]")}(0,n.useEffect)(()=>{setTimeout(()=>{!async function(){await H()}()},1e3)},[]);return(0,L.jsx)("div",{children:(0,L.jsx)(s.A,{maxWidth:"lg",className:e.container,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,justifyContent:"flex-end",children:[(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(r.A,{className:e.card1,style:{overflow:"hidden"},elevation:4,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,children:[(0,L.jsxs)(o.A,{item:!0,xs:8,children:[(0,L.jsx)(m.A,{component:"h3",variant:"h6",paragraph:!0,children:I.R.t("dashboard.counters.inTalk")}),(0,L.jsx)(o.A,{item:!0,children:(0,L.jsx)(m.A,{component:"h1",variant:"h4",children:t.supportHappening})})]}),(0,L.jsx)(o.A,{item:!0,xs:2,children:(0,L.jsx)(g.A,{style:{fontSize:100,color:"#FFFFFF"}})})]})})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(r.A,{className:e.card2,style:{overflow:"hidden"},elevation:6,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,children:[(0,L.jsxs)(o.A,{item:!0,xs:8,children:[(0,L.jsx)(m.A,{component:"h3",variant:"h6",paragraph:!0,children:I.R.t("dashboard.counters.waiting")}),(0,L.jsx)(o.A,{item:!0,children:(0,L.jsx)(m.A,{component:"h1",variant:"h4",children:t.supportPending})})]}),(0,L.jsx)(o.A,{item:!0,xs:4,children:(0,L.jsx)(f.A,{style:{fontSize:100,color:"#FFFFFF"}})})]})})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(r.A,{className:e.card3,style:{overflow:"hidden"},elevation:6,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,children:[(0,L.jsxs)(o.A,{item:!0,xs:8,children:[(0,L.jsx)(m.A,{component:"h3",variant:"h6",paragraph:!0,children:I.R.t("dashboard.counters.finished")}),(0,L.jsx)(o.A,{item:!0,children:(0,L.jsx)(m.A,{component:"h1",variant:"h4",children:t.supportFinished})})]}),(0,L.jsx)(o.A,{item:!0,xs:4,children:(0,L.jsx)(A.A,{style:{fontSize:100,color:"#FFFFFF"}})})]})})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(r.A,{className:e.card4,style:{overflow:"hidden"},elevation:6,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,children:[(0,L.jsxs)(o.A,{item:!0,xs:8,children:[(0,L.jsx)(m.A,{component:"h3",variant:"h6",paragraph:!0,children:I.R.t("dashboard.counters.newContacts")}),(0,L.jsx)(o.A,{item:!0,children:(0,L.jsx)(m.A,{component:"h1",variant:"h4",children:(e=>{let t={};e&&(t={});const{count:a}=U(t);return a})(!0)})})]}),(0,L.jsx)(o.A,{item:!0,xs:4,children:(0,L.jsx)(u.A,{style:{fontSize:100,color:"#FFFFFF"}})})]})})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(r.A,{className:e.card8,style:{overflow:"hidden"},elevation:6,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,children:[(0,L.jsxs)(o.A,{item:!0,xs:8,children:[(0,L.jsx)(m.A,{component:"h3",variant:"h6",paragraph:!0,children:I.R.t("dashboard.counters.averageTalkTime")}),(0,L.jsx)(o.A,{item:!0,children:(0,L.jsx)(m.A,{component:"h1",variant:"h4",children:z(t.avgSupportTime)})})]}),(0,L.jsx)(o.A,{item:!0,xs:4,children:(0,L.jsx)(j.A,{style:{fontSize:100,color:"#FFFFFF"}})})]})})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(r.A,{className:e.card9,style:{overflow:"hidden"},elevation:6,children:(0,L.jsxs)(o.A,{container:!0,spacing:3,children:[(0,L.jsxs)(o.A,{item:!0,xs:8,children:[(0,L.jsx)(m.A,{component:"h3",variant:"h6",paragraph:!0,children:I.R.t("dashboard.counters.averageWaitTime")}),(0,L.jsx)(o.A,{item:!0,children:(0,L.jsx)(m.A,{component:"h1",variant:"h4",children:z(t.avgWaitTime)})})]}),(0,L.jsx)(o.A,{item:!0,xs:4,children:(0,L.jsx)(y.A,{style:{fontSize:100,color:"#FFFFFF"}})})]})})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsxs)(d.A,{className:e.selectContainer,children:[(0,L.jsx)(c.A,{id:"period-selector-label",children:I.R.t("dashboard.filters.filterType.title")}),(0,L.jsxs)(h.A,{labelId:"period-selector-label",value:R,onChange:e=>async function(e){D(e),1===e?w(0):(T(""),N(""))}(e.target.value),children:[(0,L.jsx)(l.A,{value:1,children:I.R.t("dashboard.filters.filterType.options.perDate")}),(0,L.jsx)(l.A,{value:2,children:I.R.t("dashboard.filters.filterType.options.perPeriod")})]}),(0,L.jsx)(x.A,{children:I.R.t("dashboard.filters.filterType.helper")})]})}),1===R?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(p.A,{label:I.R.t("dashboard.filters.initialDate"),type:"date",value:C,onChange:e=>T(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}})}),(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsx)(p.A,{label:I.R.t("dashboard.filters.finalDate"),type:"date",value:P,onChange:e=>N(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}})})]}):(0,L.jsx)(o.A,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsxs)(d.A,{className:e.selectContainer,children:[(0,L.jsx)(c.A,{id:"period-selector-label",children:I.R.t("dashboard.periodSelect.title")}),(0,L.jsxs)(h.A,{labelId:"period-selector-label",id:"period-selector",value:k,onChange:e=>async function(e){w(e)}(e.target.value),children:[(0,L.jsx)(l.A,{value:0,children:I.R.t("dashboard.periodSelect.options.none")}),(0,L.jsx)(l.A,{value:3,children:I.R.t("dashboard.periodSelect.options.last3")}),(0,L.jsx)(l.A,{value:7,children:I.R.t("dashboard.periodSelect.options.last7")}),(0,L.jsx)(l.A,{value:15,children:I.R.t("dashboard.periodSelect.options.last15")}),(0,L.jsx)(l.A,{value:30,children:I.R.t("dashboard.periodSelect.options.last30")}),(0,L.jsx)(l.A,{value:60,children:I.R.t("dashboard.periodSelect.options.last60")}),(0,L.jsx)(l.A,{value:90,children:I.R.t("dashboard.periodSelect.options.last90")})]}),(0,L.jsx)(x.A,{children:I.R.t("dashboard.periodSelect.helper")})]})}),(0,L.jsx)(o.A,{item:!0,xs:12,className:e.alignRight,children:(0,L.jsx)(F.A,{loading:M,onClick:()=>H(),variant:"contained",color:"primary",children:I.R.t("dashboard.buttons.filter")})}),(0,L.jsx)(o.A,{item:!0,xs:12,children:b.length?(0,L.jsx)(O,{attendants:b,loading:M}):null}),(0,L.jsx)(o.A,{item:!0,xs:12,children:(0,L.jsx)(r.A,{className:e.fixedHeightPaper2,children:(0,L.jsx)(se,{})})}),(0,L.jsx)(o.A,{item:!0,xs:12,children:(0,L.jsx)(r.A,{className:e.fixedHeightPaper2,children:(0,L.jsx)(le,{})})})]})})})}}}]);