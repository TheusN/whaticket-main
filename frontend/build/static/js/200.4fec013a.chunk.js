"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[200],{3863:(e,t,r)=>{r.d(t,{A:()=>o});r(9950);var a=r(39886),n=r(44414);function o(e){return(0,n.jsx)(a.A,{variant:"h5",color:"primary",gutterBottom:!0,children:e.children})}},38847:(e,t,r)=>{r.d(t,{A:()=>s});r(9950);var a=r(69994),n=r(44414);const o=(0,a.A)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}})),s=e=>{let{children:t}=e;const r=o();return(0,n.jsx)("div",{className:r.contactsHeader,children:t})}},39655:(e,t,r)=>{r.d(t,{A:()=>s});r(9950);var a=r(69994),n=r(44414);const o=(0,a.A)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}})),s=e=>{let{children:t}=e;const r=o();return(0,n.jsx)("div",{className:r.MainHeaderButtonsWrapper,children:t})}},42239:(e,t,r)=>{r.d(t,{A:()=>d});r(9950);var a=r(5386),n=r(92560),o=r(20906),s=r(69994),l=r(44414);const i=(0,s.A)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}})),d=e=>{let{avatar:t,columns:r}=e;const s=i();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(n.A,{children:[t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.A,{style:{paddingRight:0},children:(0,l.jsx)(o.A,{animation:"wave",variant:"circle",width:40,height:40})}),(0,l.jsx)(a.A,{children:(0,l.jsx)(o.A,{animation:"wave",height:30,width:80})})]}),Array.from({length:r},(e,t)=>(0,l.jsx)(a.A,{align:"center",children:(0,l.jsx)("div",{className:s.customTableCell,children:(0,l.jsx)(o.A,{align:"center",animation:"wave",height:30,width:80})})},t))]})})}},82200:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var a=r(89379),n=r(9950),o=r(52816),s=r(77882),l=r(49986),i=r(37874),d=r(92560),p=r(5386),c=r(80158),m=r(97226),u=r(69994),h=r(86505),x=r(38847),A=r(39655),f=r(42239),g=r(3863),j=r(33906),y=r(77534),v=r(45530),R=r(29470),b=r(50815),M=r(29714),T=r(6443),E=r(85923),q=r(46493),k=r(32018),C=r(18028),P=r(43510),S=r(77766),W=r(96918),w=r(80892),I=r(12630),D=r(57513),L=r(7692),N=r(39884),B=r(75409),O=r(47818),_=r(59428),F=r(39886),K=r(44414);const Y=(0,u.A)(e=>({formControl:{margin:e.spacing(1),minWidth:120}})),z=(e,t)=>{const r=Y(),[a,o]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{try{const{data:e}=await v.A.get("/queue");o(e)}catch(e){(0,y.A)("QUEUESELETSINGLE >>> ".concat(e))}})()},[]),(0,K.jsx)("div",{style:{marginTop:6},children:(0,K.jsx)(I.A,{variant:"outlined",className:r.FormControl,margin:"dense",fullWidth:!0,children:(0,K.jsxs)("div",{children:[(0,K.jsx)(F.A,{children:j.R.t("queueSelect.inputLabel")}),(0,K.jsx)(T.D0,{as:L.A,label:j.R.t("queueSelect.inputLabel"),name:"queueId",labelId:"queue-selection-label",id:"queue-selection",error:e.queueId&&Boolean(t.queueId),helpertext:e.name&&t.name,fullWidth:!0,children:a.map(e=>(0,K.jsx)(N.A,{value:e.id,children:e.name},e.id))})]})})})},H=(0,u.A)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:q.A[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),U=M.Ik().shape({name:M.Yj().min(5,j.R.t("promptModal.formErrors.name.short")).max(100,j.R.t("promptModal.formErrors.name.long")).required(j.R.t("promptModal.formErrors.name.required")),prompt:M.Yj().min(50,j.R.t("promptModal.formErrors.prompt.short")).required(j.R.t("promptModal.formErrors.prompt.required")),model:M.Yj().required(j.R.t("promptModal.formErrors.modal.required")),maxTokens:M.ai().required(j.R.t("promptModal.formErrors.maxTokens.required")),temperature:M.ai().required(j.R.t("promptModal.formErrors.temperature.required")),apiKey:M.Yj().required(j.R.t("promptModal.formErrors.apikey.required")),queueId:M.ai().required(j.R.t("promptModal.formErrors.queueId.required")),maxMessages:M.ai().required(j.R.t("promptModal.formErrors.maxMessages.required"))}),G=e=>{let{open:t,onClose:r,promptId:s,refreshPrompts:l}=e;const i=H(),[d,p]=(0,n.useState)("gpt-3.5-turbo-1106"),[c,u]=(0,n.useState)(!1),h=()=>{u(!c)},x={name:"",prompt:"",model:"gpt-3.5-turbo-1106",maxTokens:100,temperature:1,apiKey:"",queueId:"",maxMessages:10},[A,f]=(0,n.useState)(x);(0,n.useEffect)(()=>{(async()=>{if(s)try{const{data:e}=await v.A.get("/prompt/".concat(s));f(t=>(0,a.A)((0,a.A)({},t),e)),p(e.model)}catch(e){(0,y.A)(e)}else f(x)})()},[s,t]);const g=()=>{f(x),p("gpt-3.5-turbo-1106"),r()},R=e=>{p(e.target.value)};return(0,K.jsx)("div",{className:i.root,children:(0,K.jsxs)(C.A,{open:t,onClose:g,maxWidth:"md",scroll:"paper",fullWidth:!0,children:[(0,K.jsx)(W.A,{id:"form-dialog-title",children:"".concat(s?j.R.t("promptModal.title.edit"):j.R.t("promptModal.title.add"))}),(0,K.jsx)(T.l1,{initialValues:A,enableReinitialize:!0,validationSchema:U,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{const t=(0,a.A)((0,a.A)({},e),{},{model:d});if(console.log(t),e.queueId){try{s?await v.A.put("/prompt/".concat(s),t):await v.A.post("/prompt",t),E.oR.success(j.R.t("promptModal.success")),l()}catch(r){(0,y.A)(r)}g()}else(0,y.A)(j.R.t("promptModal.setor"))})(e),t.setSubmitting(!1)},400)},children:e=>{let{touched:t,errors:r,isSubmitting:a,values:n}=e;return(0,K.jsxs)(T.lV,{style:{width:"100%"},children:[(0,K.jsxs)(S.A,{dividers:!0,children:[(0,K.jsx)(T.D0,{as:k.A,label:j.R.t("promptModal.form.name"),name:"name",error:t.name&&Boolean(r.name),helperText:t.name&&r.name,variant:"outlined",margin:"dense",fullWidth:!0}),(0,K.jsx)(I.A,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,K.jsx)(T.D0,{as:k.A,label:j.R.t("promptModal.form.apikey"),name:"apiKey",type:c?"text":"password",error:t.apiKey&&Boolean(r.apiKey),helperText:t.apiKey&&r.apiKey,variant:"outlined",margin:"dense",fullWidth:!0,InputProps:{endAdornment:(0,K.jsx)(_.A,{position:"end",children:(0,K.jsx)(m.A,{onClick:h,children:c?(0,K.jsx)(B.A,{}):(0,K.jsx)(O.A,{})})})}})}),(0,K.jsx)(T.D0,{as:k.A,label:j.R.t("promptModal.form.prompt"),name:"prompt",error:t.prompt&&Boolean(r.prompt),helperText:t.prompt&&r.prompt,variant:"outlined",margin:"dense",fullWidth:!0,rows:10,multiline:!0}),(0,K.jsx)(z,{touched:t,errors:r}),(0,K.jsxs)("div",{className:i.multFieldLine,children:[(0,K.jsxs)(I.A,{fullWidth:!0,margin:"dense",variant:"outlined",children:[(0,K.jsx)(D.A,{children:j.R.t("promptModal.form.model")}),(0,K.jsxs)(L.A,{id:"type-select",labelWidth:60,name:"model",value:d,onChange:R,multiple:!1,children:[(0,K.jsx)(N.A,{value:"gpt-3.5-turbo-1106",children:"GPT 3.5 turbo"},"gpt-3.5"),(0,K.jsx)(N.A,{value:"gpt-4o-mini",children:"GPT 4.0"},"gpt-4")]})]}),(0,K.jsx)(T.D0,{as:k.A,label:j.R.t("promptModal.form.temperature"),name:"temperature",error:t.temperature&&Boolean(r.temperature),helperText:t.temperature&&r.temperature,variant:"outlined",margin:"dense",fullWidth:!0,type:"number",inputProps:{step:"0.1",min:"0",max:"1"}})]}),(0,K.jsxs)("div",{className:i.multFieldLine,children:[(0,K.jsx)(T.D0,{as:k.A,label:j.R.t("promptModal.form.max_tokens"),name:"maxTokens",error:t.maxTokens&&Boolean(r.maxTokens),helperText:t.maxTokens&&r.maxTokens,variant:"outlined",margin:"dense",fullWidth:!0}),(0,K.jsx)(T.D0,{as:k.A,label:j.R.t("promptModal.form.max_messages"),name:"maxMessages",error:t.maxMessages&&Boolean(r.maxMessages),helperText:t.maxMessages&&r.maxMessages,variant:"outlined",margin:"dense",fullWidth:!0})]})]}),(0,K.jsxs)(P.A,{children:[(0,K.jsx)(o.A,{onClick:g,color:"secondary",disabled:a,variant:"outlined",children:j.R.t("promptModal.buttons.cancel")}),(0,K.jsxs)(o.A,{type:"submit",color:"primary",disabled:a,variant:"contained",className:i.btnWrapper,children:["".concat(s?j.R.t("promptModal.buttons.okEdit"):j.R.t("promptModal.buttons.okAdd")),a&&(0,K.jsx)(w.A,{size:24,className:i.buttonProgress})]})]})]})}})]})})};var V=r(60995),Q=r(18957),J=r(65774),X=r(17062),Z=r(23665);const $=(0,u.A)(e=>({mainPaper:(0,a.A)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles),customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"},redBox:{backgroundColor:"#ffcccc",padding:e.spacing(2),marginBottom:e.spacing(2)}})),ee=(e,t)=>{if("LOAD_PROMPTS"===t.type){const r=t.payload,a=[];return 0===r.length?[]:(r.forEach(t=>{const r=e.findIndex(e=>e.id===t.id);-1!==r?e[r]=t:a.push(t)}),[...e,...a])}if("UPDATE_PROMPTS"===t.type){const r=t.payload,a=e.findIndex(e=>e.id===r.id);return-1!==a?(e[a]=r,[...e]):[r,...e]}if("DELETE_PROMPT"===t.type){const r=t.payload,a=e.findIndex(e=>e.id===r);return-1!==a&&e.splice(a,1),[...e]}if("RESET"===t.type)return[]},te=()=>{const e=$(),[t,r]=(0,n.useReducer)(ee,[]),[a,u]=(0,n.useState)(!1),[M,T]=(0,n.useState)(!1),[q,k]=(0,n.useState)(null),[C,P]=(0,n.useState)(!1),{user:S}=(0,n.useContext)(Q.c),{getPlanCompany:W}=(0,J.A)(),w=(0,X.W6)(),I=S.companyId,D=(0,n.useContext)(Z.d);(0,n.useEffect)(()=>{!async function(){(await W(void 0,I)).plan.useOpenAi||(E.oR.error("Esta empresa n\xe3o possui permiss\xe3o para acessar essa p\xe1gina! Estamos lhe redirecionando."),setTimeout(()=>{w.push("/")},1e3))}()},[]),(0,n.useEffect)(()=>{(async()=>{u(!0);try{L(),u(!1)}catch(e){(0,y.A)(e),u(!1)}})()},[]),(0,n.useEffect)(()=>{const e=D.getSocket(I);return e.on("company-".concat(I,"-prompt"),e=>{"update"!==e.action&&"create"!==e.action||r({type:"UPDATE_PROMPTS",payload:e.prompt}),"delete"===e.action&&r({type:"DELETE_PROMPT",payload:e.promptId})}),()=>{e.disconnect()}},[I,D]);const L=async()=>{const{data:e}=await v.A.get("/prompt");r({type:"LOAD_PROMPTS",payload:e.prompts})};return(0,K.jsxs)(h.A,{children:[(0,K.jsx)(V.A,{title:q&&"".concat(j.R.t("prompts.confirmationModal.deleteTitle")," ").concat(q.name,"?"),open:C,onClose:()=>{P(!1),k(null)},onConfirm:()=>(async e=>{try{const{data:t}=await v.A.delete("/prompt/".concat(e));r({type:"DELETE_PROMPT",payload:e}),E.oR.info(j.R.t(t.message))}catch(t){(0,y.A)(t)}k(null)})(q.id),children:j.R.t("prompts.confirmationModal.deleteMessage")}),(0,K.jsx)(G,{open:M,onClose:()=>{T(!1),k(null)},promptId:null===q||void 0===q?void 0:q.id,refreshPrompts:L}),(0,K.jsxs)(x.A,{children:[(0,K.jsx)(g.A,{children:j.R.t("prompts.title")}),(0,K.jsx)(A.A,{children:(0,K.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>{T(!0),k(null)},children:j.R.t("prompts.buttons.add")})})]}),(0,K.jsx)(s.A,{className:e.mainPaper,variant:"outlined",children:(0,K.jsxs)(l.A,{size:"small",children:[(0,K.jsx)(i.A,{children:(0,K.jsxs)(d.A,{children:[(0,K.jsx)(p.A,{align:"left",children:j.R.t("prompts.table.name")}),(0,K.jsx)(p.A,{align:"left",children:j.R.t("prompts.table.queue")}),(0,K.jsx)(p.A,{align:"left",children:j.R.t("prompts.table.max_tokens")}),(0,K.jsx)(p.A,{align:"center",children:j.R.t("prompts.table.actions")})]})}),(0,K.jsx)(c.A,{children:(0,K.jsxs)(K.Fragment,{children:[t.map(e=>{var t;return(0,K.jsxs)(d.A,{children:[(0,K.jsx)(p.A,{align:"left",children:e.name}),(0,K.jsx)(p.A,{align:"left",children:null===(t=e.queue)||void 0===t?void 0:t.name}),(0,K.jsx)(p.A,{align:"left",children:e.maxTokens}),(0,K.jsxs)(p.A,{align:"center",children:[(0,K.jsx)(m.A,{size:"small",onClick:()=>(e=>{k(e),T(!0)})(e),children:(0,K.jsx)(R.A,{})}),(0,K.jsx)(m.A,{size:"small",onClick:()=>{k(e),P(!0)},children:(0,K.jsx)(b.A,{})})]})]},e.id)}),a&&(0,K.jsx)(f.A,{columns:4})]})})]})})]})}},86505:(e,t,r)=>{r.d(t,{A:()=>l});r(9950);var a=r(69994),n=r(54742),o=r(44414);const s=(0,a.A)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}})),l=e=>{let{children:t}=e;const r=s();return(0,o.jsx)(n.A,{className:r.mainContainer,children:(0,o.jsx)("div",{className:r.contentWrapper,children:t})})}}}]);