"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[339],{3863:(e,t,a)=>{a.d(t,{A:()=>l});a(9950);var n=a(39886),s=a(44414);function l(e){return(0,s.jsx)(n.A,{variant:"h5",color:"primary",gutterBottom:!0,children:e.children})}},38847:(e,t,a)=>{a.d(t,{A:()=>r});a(9950);var n=a(69994),s=a(44414);const l=(0,n.A)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}})),r=e=>{let{children:t}=e;const a=l();return(0,s.jsx)("div",{className:a.contactsHeader,children:t})}},39655:(e,t,a)=>{a.d(t,{A:()=>r});a(9950);var n=a(69994),s=a(44414);const l=(0,n.A)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}})),r=e=>{let{children:t}=e;const a=l();return(0,s.jsx)("div",{className:a.MainHeaderButtonsWrapper,children:t})}},42239:(e,t,a)=>{a.d(t,{A:()=>c});a(9950);var n=a(5386),s=a(92560),l=a(20906),r=a(69994),i=a(44414);const o=(0,r.A)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}})),c=e=>{let{avatar:t,columns:a}=e;const r=o();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.A,{children:[t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.A,{style:{paddingRight:0},children:(0,i.jsx)(l.A,{animation:"wave",variant:"circle",width:40,height:40})}),(0,i.jsx)(n.A,{children:(0,i.jsx)(l.A,{animation:"wave",height:30,width:80})})]}),Array.from({length:a},(e,t)=>(0,i.jsx)(n.A,{align:"center",children:(0,i.jsx)("div",{className:r.customTableCell,children:(0,i.jsx)(l.A,{align:"center",animation:"wave",height:30,width:80})})},t))]})})}},57339:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var n=a(89379),s=a(9950),l=a(85923),r=a(69994),i=a(77882),o=a(52816),c=a(49986),d=a(80158),u=a(5386),h=a(37874),m=a(92560),x=a(97226),p=a(16714),A=a(32018),g=a(59428),j=a(33043),f=a(36386),y=a(86505),b=a(38847),v=a(39655),C=a(3863),R=a(45530),S=a(33906),k=a(42239),T=a(29714),w=a(6443),E=a(46493),M=a(18028),N=a(43510),I=a(77766),W=a(96918),L=a(80892),P=a(73361),D=a(16821),F=a(77534),z=a(18957),B=a(14566),G=a(95535),H=a(44414);const _=(0,r.A)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:E.A[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),O=T.Ik().shape({name:T.Yj().min(3,"Mensagem muito curta").required("Obrigat\xf3rio")}),U=e=>{let{open:t,onClose:a,tagId:r,reload:i}=e;const c=_(),{user:d}=(0,s.useContext)(z.c),[u,h]=(0,s.useState)(!1),m={name:"",color:"",kanban:0},[p,j]=(0,s.useState)(m),[f,y]=(0,s.useState)(0);(0,s.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await R.A.get("/tags/".concat(r));y(e.kanban),j(t=>(0,n.A)((0,n.A)({},t),e))})()}catch(e){(0,F.A)(e)}},[r,t]);const b=()=>{j(m),h(!1),a()},v=e=>{y(e.target.checked?1:0)};return(0,H.jsx)("div",{className:c.root,children:(0,H.jsxs)(M.A,{open:t,onClose:b,maxWidth:"xs",fullWidth:!0,scroll:"paper",children:[(0,H.jsx)(W.A,{id:"form-dialog-title",children:"".concat(r?S.R.t("tagModal.title.edit"):S.R.t("tagModal.title.add"))}),(0,H.jsx)(w.l1,{initialValues:p,enableReinitialize:!0,validationSchema:O,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{const t=(0,n.A)((0,n.A)({},e),{},{userId:d.id,kanban:f});try{r?await R.A.put("/tags/".concat(r),t):await R.A.post("/tags",t),l.oR.success(S.R.t("tagModal.success")),"function"==typeof i&&i()}catch(a){(0,F.A)(a)}b()})(e),t.setSubmitting(!1)},400)},children:e=>{let{touched:t,errors:a,isSubmitting:s,values:l}=e;return(0,H.jsxs)(w.lV,{children:[(0,H.jsxs)(I.A,{dividers:!0,children:[(0,H.jsx)("div",{className:c.multFieldLine,children:(0,H.jsx)(w.D0,{as:A.A,label:S.R.t("tagModal.form.name"),name:"name",error:t.name&&Boolean(a.name),helperText:t.name&&a.name,variant:"outlined",margin:"dense",onChange:e=>j(t=>(0,n.A)((0,n.A)({},t),{},{name:e.target.value})),fullWidth:!0})}),(0,H.jsx)("br",{}),(0,H.jsx)("div",{className:c.multFieldLine,children:(0,H.jsx)(w.D0,{as:A.A,fullWidth:!0,label:S.R.t("tagModal.form.color"),name:"color",id:"color",error:t.color&&Boolean(a.color),helperText:t.color&&a.color,InputProps:{startAdornment:(0,H.jsx)(g.A,{position:"start",children:(0,H.jsx)("div",{style:{backgroundColor:l.color},className:c.colorAdorment})}),endAdornment:(0,H.jsx)(x.A,{size:"small",color:"default",onClick:()=>h(!u),children:(0,H.jsx)(P.A,{})})},variant:"outlined",margin:"dense"})}),("admin"===d.profile||"supervisor"===d.profile)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("div",{className:c.multFieldLine,children:(0,H.jsx)(B.A,{control:(0,H.jsx)(G.A,{checked:1===f,onChange:v,value:f,color:"primary"}),label:"Kanban",labelPlacement:"start"})}),(0,H.jsx)("br",{})]}),u&&(0,H.jsx)("div",{children:(0,H.jsx)(D.BK,{disableAlpha:!0,hslGradient:!1,style:{margin:"20px auto 0"},value:p.color,onChange:e=>{j(t=>(0,n.A)((0,n.A)({},t),{},{color:"#".concat(e.hex)}))}})})]}),(0,H.jsxs)(N.A,{children:[(0,H.jsx)(o.A,{onClick:b,color:"secondary",disabled:s,variant:"outlined",children:S.R.t("tagModal.buttons.cancel")}),(0,H.jsxs)(o.A,{type:"submit",color:"primary",disabled:s,variant:"contained",className:c.btnWrapper,children:["".concat(r?S.R.t("tagModal.buttons.okEdit"):S.R.t("tagModal.buttons.okAdd")),s&&(0,H.jsx)(L.A,{size:24,className:c.buttonProgress})]})]})]})}})]})})};var Y=a(60995),K=a(11647),V=a(23665);const q=(e,t)=>{if("LOAD_TAGS"===t.type){const a=t.payload,n=[];return a.forEach(t=>{const a=e.findIndex(e=>e.id===t.id);-1!==a?e[a]=t:n.push(t)}),[...e,...n]}if("UPDATE_TAGS"===t.type){const a=t.payload,n=e.findIndex(e=>e.id===a.id);return-1!==n?(e[n]=a,[...e]):[a,...e]}if("DELETE_TAG"===t.type){const a=t.payload,n=e.findIndex(e=>e.id===a);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===t.type)return[]},J=(0,r.A)(e=>({mainPaper:(0,n.A)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)})),Q=()=>{const e=J(),{user:t}=(0,s.useContext)(z.c),[a,n]=(0,s.useState)(!1),[r,T]=(0,s.useState)(1),[w,E]=(0,s.useState)(!1),[M,N]=(0,s.useState)(null),[I,W]=(0,s.useState)(null),[L,P]=(0,s.useState)(!1),[D,B]=(0,s.useState)(""),[G,_]=(0,s.useReducer)(q,[]),[O,Q]=(0,s.useState)(!1),X=(0,s.useCallback)(async()=>{try{const{data:e}=await R.A.get("/tags/",{params:{searchParam:D,pageNumber:r}});_({type:"LOAD_TAGS",payload:e.tags}),E(e.hasMore),n(!1)}catch(e){(0,F.A)(e)}},[D,r]),Z=(0,s.useContext)(V.d);(0,s.useEffect)(()=>{_({type:"RESET"}),T(1)},[D]),(0,s.useEffect)(()=>{n(!0);const e=setTimeout(()=>{X()},500);return()=>clearTimeout(e)},[D,r,X]),(0,s.useEffect)(()=>{const e=Z.getSocket(t.companyId);return e.on("user",e=>{"update"!==e.action&&"create"!==e.action||_({type:"UPDATE_TAGS",payload:e.tags}),"delete"===e.action&&_({type:"DELETE_USER",payload:+e.tagId})}),()=>{e.disconnect()}},[Z,t]);return(0,H.jsxs)(y.A,{children:[(0,H.jsx)(Y.A,{title:I&&"".concat(S.R.t("tags.confirmationModal.deleteTitle")),open:L,onClose:P,onConfirm:()=>(async e=>{try{await R.A.delete("/tags/".concat(e)),l.oR.success(S.R.t("tags.toasts.deleted"))}catch(t){(0,F.A)(t)}W(null),B(""),T(1),_({type:"RESET"}),T(1),await X()})(I.id),children:S.R.t("tags.confirmationModal.deleteMessage")}),(0,H.jsx)(U,{open:O,onClose:()=>{N(null),Q(!1)},reload:X,"aria-labelledby":"form-dialog-title",tagId:M&&M.id}),(0,H.jsxs)(b.A,{children:[(0,H.jsx)(C.A,{children:S.R.t("tags.title")}),(0,H.jsxs)(v.A,{children:[(0,H.jsx)(A.A,{placeholder:S.R.t("contacts.searchPlaceholder"),type:"search",value:D,onChange:e=>{B(e.target.value.toLowerCase())},InputProps:{startAdornment:(0,H.jsx)(g.A,{position:"start",children:(0,H.jsx)(p.A,{style:{color:"gray"}})})}}),(0,H.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>{N(null),Q(!0)},children:S.R.t("tags.buttons.add")})]})]}),(0,H.jsx)(i.A,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!w||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:s}=e.currentTarget;n-(t+100)<s&&T(e=>e+1)},children:(0,H.jsxs)(c.A,{size:"small",children:[(0,H.jsx)(h.A,{children:(0,H.jsxs)(m.A,{children:[(0,H.jsx)(u.A,{align:"center",children:S.R.t("tags.table.name")}),(0,H.jsx)(u.A,{align:"center",children:S.R.t("tags.table.tickets")}),(0,H.jsx)(u.A,{align:"center",children:S.R.t("tags.table.actions")})]})}),(0,H.jsx)(d.A,{children:(0,H.jsxs)(H.Fragment,{children:[G.map(e=>(0,H.jsxs)(m.A,{children:[(0,H.jsx)(u.A,{align:"center",children:(0,H.jsx)(K.A,{variant:"outlined",style:{backgroundColor:e.color,textShadow:"1px 1px 1px #000",color:"white"},label:e.name,size:"small"})}),(0,H.jsx)(u.A,{align:"center",children:e.ticketsCount}),(0,H.jsxs)(u.A,{align:"center",children:[(0,H.jsx)(x.A,{size:"small",onClick:()=>(e=>{N(e),Q(!0)})(e),children:(0,H.jsx)(f.A,{})}),(0,H.jsx)(x.A,{size:"small",onClick:t=>{P(!0),W(e)},children:(0,H.jsx)(j.A,{})})]})]},e.id)),a&&(0,H.jsx)(k.A,{columns:4})]})})]})})]})}},86505:(e,t,a)=>{a.d(t,{A:()=>i});a(9950);var n=a(69994),s=a(54742),l=a(44414);const r=(0,n.A)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}})),i=e=>{let{children:t}=e;const a=r();return(0,l.jsx)(s.A,{className:a.mainContainer,children:(0,l.jsx)("div",{className:a.contentWrapper,children:t})})}}}]);