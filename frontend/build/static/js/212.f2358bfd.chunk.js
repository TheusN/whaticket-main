(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[212],{3863:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var a=n(39886),o=n(44414);function s(e){return(0,o.jsx)(a.A,{variant:"h5",color:"primary",gutterBottom:!0,children:e.children})}},38847:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(9950);var a=n(69994),o=n(44414);const s=(0,a.A)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}})),l=e=>{let{children:t}=e;const n=s();return(0,o.jsx)("div",{className:n.contactsHeader,children:t})}},39655:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(9950);var a=n(69994),o=n(44414);const s=(0,a.A)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}})),l=e=>{let{children:t}=e;const n=s();return(0,o.jsx)("div",{className:n.MainHeaderButtonsWrapper,children:t})}},42239:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});n(9950);var a=n(5386),o=n(92560),s=n(20906),l=n(69994),r=n(44414);const i=(0,l.A)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}})),c=e=>{let{avatar:t,columns:n}=e;const l=i();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.A,{children:[t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{style:{paddingRight:0},children:(0,r.jsx)(s.A,{animation:"wave",variant:"circle",width:40,height:40})}),(0,r.jsx)(a.A,{children:(0,r.jsx)(s.A,{animation:"wave",height:30,width:80})})]}),Array.from({length:n},(e,t)=>(0,r.jsx)(a.A,{align:"center",children:(0,r.jsx)("div",{className:l.customTableCell,children:(0,r.jsx)(s.A,{align:"center",animation:"wave",height:30,width:80})})},t))]})})}},64028:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var a=n(89379),o=n(9950),s=n(52816),l=n(32018),r=n(18028),i=n(43510),c=n(77766),d=n(96918),u=n(40050),m=n(23386),p=n(80892),h=n(33906),x=n(45530),A=n(39456),g=n(89314),j=n(77534),f=n(69994),v=n(18957),b=n(32988),y=n(7692),C=n(39884),R=n(81788),T=n(39886),S=n(85923),M=n(44414);const w=(0,f.A)(e=>({online:{fontSize:11,color:"#25d366"},offline:{fontSize:11,color:"#e1306c"}})),E=(0,u.Z)({trim:!0}),I=e=>{let{modalOpen:t,onClose:n,initialContact:u}=e;const f=w(),[I,N]=(0,o.useState)([]),[k,O]=(0,o.useState)(!1),[W,F]=(0,o.useState)(""),[P,D]=(0,o.useState)(null),[z,L]=(0,o.useState)(""),[B,_]=(0,o.useState)(""),[H,q]=(0,o.useState)({}),[V,Y]=(0,o.useState)([]),[K,Q]=(0,o.useState)([]),[U,Z]=(0,o.useState)(!1),{user:G}=(0,o.useContext)(v.c),{companyId:J,whatsappId:X}=G,[$,ee]=(0,o.useState)(!1),[te,ne]=(0,o.useState)(""),[ae,oe]=(0,o.useState)("");(0,o.useEffect)(()=>{void 0!==(null===u||void 0===u?void 0:u.id)&&(N([u]),D(u))},[u]),(0,o.useEffect)(()=>{O(!0);const e=setTimeout(()=>{null!==X&&void 0!==X&&_(X);(async()=>{if("admin"!==G.profile)return Q(G.queues),void(1===G.queues.length&&L(G.queues[0].id));try{const{data:e}=await x.A.get("/queue");Q(e),1===e.length&&L(e[0].id)}catch(e){(0,j.A)(h.R.t("newTicketModal.searchQueueError"))}})(),(async()=>{x.A.get("/whatsapp",{params:{companyId:J,session:0}}).then(e=>{let{data:t}=e;return Y(t)})})(),O(!1)},500);return()=>clearTimeout(e)},[]),(0,o.useEffect)(()=>{if(!t||W.length<3)return void O(!1);O(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await x.A.get("contacts",{params:{searchParam:W}});N(e.contacts),O(!1)}catch(e){O(!1),(0,j.A)(e)}})()},500);return()=>clearTimeout(e)},[W,t]);const se=()=>{n(),F(""),ee(!1),ne(""),oe(""),D(null)},le=async e=>{if(e)if(""!==z||"admin"===G.profile){O(!0);try{const t=""!==z?z:null,a=""!==B?B:null,{data:o}=await x.A.post("/tickets",{contactId:e,queueId:t,whatsappId:a,userId:G.id,status:"open"});n(o)}catch(t){console.log(t);const e=t.response.data.error;console.log(e),"ERR_OTHER_OPEN_TICKET"===e&&(0,j.A)(t),"ERR_OTHER_OPEN_TICKET"!==e&&e.userId!==(null===G||void 0===G?void 0:G.id)?(ee(!0),ne(e.user.name),oe(e.queue.name)):(ee(!1),ne(""),oe(""),O(!1),n(e))}O(!1)}else S.oR.error(h.R.t("newTicketModal.selectQueue"))},re=(e,t)=>{const n=E(e,t);return""!==t.inputValue&&!k&&W.length>=3&&n.push({name:"".concat(t.inputValue)}),n},ie=e=>e.number?(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(T.A,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"},children:[e.name," - ",e.number]})}):"".concat(h.R.t("newTicketModal.add")," ").concat(e.name),ce=e=>e.number?"".concat(e.name," - ").concat(e.number):"".concat(e.name);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.A,{open:U,initialValues:H,onClose:()=>{Z(!1)},onSave:e=>{le(e.id)}}),(0,M.jsxs)(r.A,{open:t,onClose:se,children:[(0,M.jsx)(d.A,{id:"form-dialog-title",children:h.R.t("newTicketModal.title")}),(0,M.jsx)(c.A,{dividers:!0,children:(0,M.jsxs)(b.A,{style:{width:300},container:!0,spacing:2,children:[void 0===u||void 0===u.id?(0,M.jsx)(b.A,{xs:12,item:!0,children:(0,M.jsx)(m.Ay,{fullWidth:!0,options:I,loading:k,clearOnBlur:!0,autoHighlight:!0,freeSolo:!0,clearOnEscape:!0,getOptionLabel:ce,renderOption:ie,filterOptions:re,onChange:(e,t)=>((e,t)=>{null!==t&&void 0!==t&&t.number?D(t):null!==t&&void 0!==t&&t.name&&(q({name:t.name}),Z(!0))})(0,t),renderInput:e=>(0,M.jsx)(l.A,(0,a.A)((0,a.A)({},e),{},{label:h.R.t("newTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>F(e.target.value),onKeyPress:e=>{!k&&P&&"Enter"===e.key&&le(P.id)},InputProps:(0,a.A)((0,a.A)({},e.InputProps),{},{endAdornment:(0,M.jsxs)(o.Fragment,{children:[k?(0,M.jsx)(p.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))})}):null,(0,M.jsx)(b.A,{xs:12,item:!0,children:(0,M.jsx)(y.A,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:z,onChange:e=>{L(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===z)return h.R.t("newTicketModal.selectQueue");return K.find(e=>e.id===z).name},children:(null===K||void 0===K?void 0:K.length)>0&&K.map((e,t)=>(0,M.jsx)(C.A,{dense:!0,value:e.id,children:(0,M.jsx)(R.A,{primary:e.name})},t))})}),(0,M.jsx)(b.A,{xs:12,item:!0,children:(0,M.jsx)(y.A,{required:!0,fullWidth:!0,displayEmpty:!0,variant:"outlined",value:B,onChange:e=>{_(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===B)return h.R.t("newTicketModal.selectConection");return V.find(e=>e.id===B).name},children:(null===V||void 0===V?void 0:V.length)>0&&V.map((e,t)=>(0,M.jsx)(C.A,{dense:!0,value:e.id,children:(0,M.jsx)(R.A,{primary:(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(T.A,{component:"span",style:{fontSize:14,marginLeft:"10px",display:"inline-flex",alignItems:"center",lineHeight:"2"},children:[e.name," \xa0 ",(0,M.jsxs)("p",{className:"CONNECTED"===e.status?f.online:f.offline,children:["(",e.status,")"]})]})})})},t))})})]})}),(0,M.jsxs)(i.A,{children:[(0,M.jsx)(s.A,{onClick:se,color:"secondary",disabled:k,variant:"outlined",children:h.R.t("newTicketModal.buttons.cancel")}),(0,M.jsx)(A.A,{variant:"contained",type:"button",disabled:!P,onClick:()=>le(P.id),color:"primary",loading:k,children:h.R.t("newTicketModal.buttons.ok")})]})]})]})}},83686:()=>{},86505:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(9950);var a=n(69994),o=n(54742),s=n(44414);const l=(0,a.A)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}})),r=e=>{let{children:t}=e;const n=l();return(0,s.jsx)(o.A,{className:n.mainContainer,children:(0,s.jsx)("div",{className:n.contentWrapper,children:t})})}},86935:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var a=n(89379),o=n(9950),s=n(85923),l=n(16673),r=n(69994),i=n(49986),c=n(80158),d=n(5386),u=n(37874),m=n(92560),p=n(77882),h=n(52816),x=n(73094),A=n(97908),g=n(16714),j=n(32018),f=n(59428),v=n(97226),b=n(33043),y=n(36386),C=n(45530),R=n(42239),T=n(89314),S=n(60995),M=n(33906),w=n(38847),E=n(3863),I=n(39655),N=n(86505),k=n(77534),O=n(18957),W=n(52776),F=n(64028),P=n(23665),D=n(46411),z=n(18028),L=n(96918),B=n(32988),_=n(77766),H=n(39886),q=n(43510),V=n(82582),Y=n(45838),K=n(44243),Q=n(55271),U=(n(29714),n(44414));const Z=(0,r.A)(e=>({root:{display:"flex",flexWrap:"wrap"},dialogImport:{minWidth:500},iFile:{display:"none"},lbFile:{border:"dashed",borderWidth:2,padding:18,cursor:"pointer",display:"inline-block",width:"70%"},btnWrapper:{position:"relative"},iconPlanilha:{marginRight:10},cLbFile:{textAlign:"center"},titleLb:{textTransform:"uppercase",fontWeight:"bolder",marginTop:10},iconDownload:{color:e.palette.primary.main,fontSize:18},cModal:{paddingTop:50,paddingBottom:50},cSuccessContacts:{backgroundColor:"#AAEE9C80",padding:10,borderRadius:8,marginTop:30},cErrorContacts:{backgroundColor:"#DD011B40",padding:10,borderRadius:8,marginTop:30},titleResult:{fontWeight:"bolder"},cCloseModal:{textAlign:"end"}})),G=e=>{const t=Z(),{open:n,onClose:a}=e,[s,l]=(0,o.useState)(!1),[r,i]=(0,o.useState)(""),[c,d]=(0,o.useState)([]),[u,m]=(0,o.useState)([]),[p,x]=(0,o.useState)([]),A=e=>{const t=new FileReader;t.onload=e=>{const t=e.target.result,n=Q.LF(t,{type:"array"}),a=n.SheetNames[0],o=n.Sheets[a],s=Q.Wp.sheet_to_json(o);d(s)},t.readAsArrayBuffer(e)};return(0,U.jsx)("div",{children:(0,U.jsxs)(z.A,{open:n,maxWidth:"sm",fullWidth:!0,scroll:"paper",children:[(0,U.jsx)(L.A,{children:(0,U.jsxs)(B.A,{container:!0,alignItems:"center",children:[(0,U.jsx)(B.A,{item:!0,xs:6,children:M.R.t("contactImportModal.title")}),(0,U.jsx)(B.A,{item:!0,xs:6,className:t.cCloseModal,children:(0,U.jsx)(v.A,{onClick:a,children:(0,U.jsx)(V.A,{})})})]})}),(0,U.jsxs)(_.A,{dividers:!0,className:t.cModal,children:[(0,U.jsxs)("div",{className:t.cLbFile,children:[(0,U.jsxs)("label",{className:t.lbFile,htmlFor:"i-import-contacts",children:[(0,U.jsx)(K.WCW,{className:t.iconDownload}),(0,U.jsx)("div",{className:t.titleLb,children:M.R.t("contactImportModal.labels.import")}),""!==r&&(0,U.jsxs)("div",{children:["(",r," - ",c.length," ",M.R.t("contactImportModal.labels.result"),")"]})]}),(0,U.jsx)("input",{onChange:e=>{const t=e.target.files[0];t&&(i(t.name),A(t))},className:t.iFile,type:"file",accept:".xlsx",id:"i-import-contacts"})]}),u.length>0&&(0,U.jsxs)("div",{className:t.cSuccessContacts,children:[(0,U.jsxs)(H.A,{className:t.titleResult,children:[M.R.t("contactImportModal.labels.added"),":"]}),u.map(e=>(0,U.jsxs)("div",{children:[e.contactId," | ",e.contactName," - ",M.R.t("contactImportModal.labels.savedContact")]}))]}),p.length>0&&(0,U.jsxs)("div",{className:t.cErrorContacts,children:[(0,U.jsxs)(H.A,{className:t.titleResult,children:[M.R.t("contactImportModal.labels.errors"),":"]}),(0,U.jsx)("ul",{children:p.map(e=>(0,U.jsxs)("li",{children:[e.contactName," - ",e.error.message]}))})]})]}),(0,U.jsxs)(q.A,{children:[(0,U.jsxs)(h.A,{color:"primary",disabled:s,variant:"outlined",onClick:()=>{window.location.href="".concat(window.location.protocol,"//").concat(window.location.host,"/import-contatos.xlsx")},children:[(0,U.jsx)(Y.A,{className:t.iconPlanilha}),M.R.t("contactImportModal.buttons.download")]}),(0,U.jsx)(h.A,{color:"primary",disabled:s,variant:"contained",className:t.btnWrapper,onClick:async()=>{l(!0);try{const{data:e}=await C.A.post("/contacts/upload",c);m(e.newContacts),x(e.errorBag)}catch(e){(0,k.A)(e)}finally{l(!1)}},children:M.R.t("contactImportModal.buttons.import")})]})]})})},J=(e,t)=>{if("LOAD_CONTACTS"===t.type){const n=t.payload,a=[];return n.forEach(t=>{const n=e.findIndex(e=>e.id===t.id);-1!==n?e[n]=t:a.push(t)}),[...e,...a]}if("UPDATE_CONTACTS"===t.type){const n=t.payload,a=e.findIndex(e=>e.id===n.id);return-1!==a?(e[a]=n,[...e]):[n,...e]}if("DELETE_CONTACT"===t.type){const n=t.payload,a=e.findIndex(e=>e.id===n);return-1!==a&&e.splice(a,1),[...e]}if("RESET"===t.type)return[]},X=(0,r.A)(e=>({mainPaper:(0,a.A)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)})),$=()=>{const e=X(),t=(0,l.useHistory)(),{user:n}=(0,o.useContext)(O.c),[a,r]=(0,o.useState)(!1),[z,L]=(0,o.useState)(1),[B,_]=(0,o.useState)(""),[H,q]=(0,o.useReducer)(J,[]),[V,Y]=(0,o.useState)(null),[K,Q]=(0,o.useState)(!1),[Z,$]=(0,o.useState)(!1),[ee,te]=(0,o.useState)({}),[ne,ae]=(0,o.useState)(null),[oe,se]=(0,o.useState)(!1),[le,re]=(0,o.useState)(!1),[ie,ce]=(0,o.useState)(!1),de=(0,o.useContext)(P.d);(0,o.useEffect)(()=>{q({type:"RESET"}),L(1)},[B]),(0,o.useEffect)(()=>{r(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await C.A.get("/contacts/",{params:{searchParam:B,pageNumber:z}});q({type:"LOAD_CONTACTS",payload:e.contacts}),re(e.hasMore),r(!1)}catch(e){(0,k.A)(e)}})()},500);return()=>clearTimeout(e)},[B,z]),(0,o.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=de.getSocket(e);return t.on("company-".concat(e,"-contact"),e=>{"update"!==e.action&&"create"!==e.action||q({type:"UPDATE_CONTACTS",payload:e.contact}),"delete"===e.action&&q({type:"DELETE_CONTACT",payload:+e.contactId})}),()=>{t.disconnect()}},[de]);return(0,U.jsxs)(N.A,{className:e.mainContainer,children:[(0,U.jsx)(G,{open:ie,onClose:()=>{ce(!1)}}),(0,U.jsx)(F.A,{modalOpen:Z,initialContact:ee,onClose:e=>{(e=>{$(!1),void 0!==e&&void 0!==e.uuid&&t.push("/tickets/".concat(e.uuid))})(e)}}),(0,U.jsx)(T.A,{open:K,onClose:()=>{Y(null),Q(!1)},"aria-labelledby":"form-dialog-title",contactId:V}),(0,U.jsx)(S.A,{title:ne?"".concat(M.R.t("contacts.confirmationModal.deleteTitle")," ").concat(ne.name,"?"):"".concat(M.R.t("contacts.confirmationModal.importTitlte")),open:oe,onClose:se,onConfirm:e=>ne?(async e=>{try{await C.A.delete("/contacts/".concat(e)),s.oR.success(M.R.t("contacts.toasts.deleted"))}catch(t){(0,k.A)(t)}ae(null),_(""),L(1)})(ne.id):(async()=>{try{await C.A.post("/contacts/import"),t.go(0)}catch(e){(0,k.A)(e)}})(),children:"".concat(ne?M.R.t("contacts.confirmationModal.deleteMessage"):M.R.t("contacts.confirmationModal.importMessage"))}),(0,U.jsxs)(w.A,{children:[(0,U.jsx)(E.A,{children:M.R.t("contacts.title")}),(0,U.jsxs)(I.A,{children:[(0,U.jsx)(j.A,{placeholder:M.R.t("contacts.searchPlaceholder"),type:"search",value:B,onChange:e=>{_(e.target.value.toLowerCase())},InputProps:{startAdornment:(0,U.jsx)(f.A,{position:"start",children:(0,U.jsx)(g.A,{style:{color:"gray"}})})}}),(0,U.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>{ce(!0)},children:M.R.t("contacts.buttons.import")}),(0,U.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>{Y(null),Q(!0)},children:M.R.t("contacts.buttons.add")}),(0,U.jsx)(D.CSVLink,{style:{textDecoration:"none"},separator:";",filename:"contatos.csv",data:H.map(e=>({name:e.name,number:e.number,email:e.email})),children:(0,U.jsx)(h.A,{variant:"contained",color:"primary",children:M.R.t("contacts.buttons.export")})})]})]}),(0,U.jsx)(p.A,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!le||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:o}=e.currentTarget;n-(t+100)<o&&L(e=>e+1)},children:(0,U.jsxs)(i.A,{size:"small",children:[(0,U.jsx)(u.A,{children:(0,U.jsxs)(m.A,{children:[(0,U.jsx)(d.A,{padding:"checkbox"}),(0,U.jsx)(d.A,{children:M.R.t("contacts.table.name")}),(0,U.jsx)(d.A,{align:"center",children:M.R.t("contacts.table.whatsapp")}),(0,U.jsx)(d.A,{align:"center",children:M.R.t("contacts.table.email")}),(0,U.jsx)(d.A,{align:"center",children:M.R.t("contacts.table.actions")})]})}),(0,U.jsx)(c.A,{children:(0,U.jsxs)(U.Fragment,{children:[H.map(e=>(0,U.jsxs)(m.A,{children:[(0,U.jsx)(d.A,{style:{paddingRight:0},children:(0,U.jsx)(x.A,{src:e.profilePicUrl})}),(0,U.jsx)(d.A,{children:e.name}),(0,U.jsx)(d.A,{align:"center",children:e.number}),(0,U.jsx)(d.A,{align:"center",children:e.email}),(0,U.jsxs)(d.A,{align:"center",children:[(0,U.jsx)(v.A,{size:"small",onClick:()=>{te(e),$(!0)},children:(0,U.jsx)(A.A,{})}),(0,U.jsx)(v.A,{size:"small",onClick:()=>{return t=e.id,Y(t),void Q(!0);var t},children:(0,U.jsx)(y.A,{})}),(0,U.jsx)(W.T,{role:n.profile,perform:"contacts-page:deleteContact",yes:()=>(0,U.jsx)(v.A,{size:"small",onClick:t=>{se(!0),ae(e)},children:(0,U.jsx)(b.A,{})})})]})]},e.id)),a&&(0,U.jsx)(R.A,{avatar:!0,columns:3})]})})]})})]})}},89314:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var a=n(89379),o=n(9950),s=n(29714),l=n(6443),r=n(85923),i=n(69994),c=n(46493),d=n(52816),u=n(32018),m=n(18028),p=n(43510),h=n(77766),x=n(96918),A=n(39886),g=n(97226),j=n(33043),f=n(80892),v=n(33906),b=n(45530),y=n(77534),C=(n(85494),n(44414));const R=(0,i.A)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:c.A[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),T=s.Ik().shape({name:s.Yj().min(2,v.R.t("contactModal.formErrors.name.short")).max(50,v.R.t("contactModal.formErrors.name.long")).required(v.R.t("contactModal.formErrors.name.required")),number:s.Yj().min(8,v.R.t("contactModal.formErrors.phone.short")).max(50,v.R.t("contactModal.formErrors.phone.long")),email:s.Yj().email(v.R.t("contactModal.formErrors.email.invalid"))}),S=e=>{let{open:t,onClose:n,contactId:s,initialValues:i,onSave:c}=e;const S=R(),M=(0,o.useRef)(!0),w={name:"",number:"",email:""},[E,I]=(0,o.useState)(w);(0,o.useEffect)(()=>()=>{M.current=!1},[]),(0,o.useEffect)(()=>{(async()=>{if(i&&I(e=>(0,a.A)((0,a.A)({},e),i)),s)try{const{data:e}=await b.A.get("/contacts/".concat(s));M.current&&(console.log(e),I((0,a.A)((0,a.A)({},e),{},{number:e.number})))}catch(e){(0,y.A)(e)}})()},[s,t,i]);const N=()=>{n(),I(w)};return(0,C.jsx)("div",{className:S.root,children:(0,C.jsxs)(m.A,{open:t,onClose:N,maxWidth:"lg",scroll:"paper",children:[(0,C.jsx)(x.A,{id:"form-dialog-title",children:"".concat(s?v.R.t("contactModal.title.edit"):v.R.t("contactModal.title.add"))}),(0,C.jsx)(l.l1,{initialValues:E,enableReinitialize:!0,validationSchema:T,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{try{if(s)await b.A.put("/contacts/".concat(s),e),N();else{const{data:t}=await b.A.post("/contacts",e);c&&c(t),N()}r.oR.success(v.R.t("contactModal.success"))}catch(t){(0,y.A)(t)}})(e),t.setSubmitting(!1)},400)},children:e=>{let{values:t,errors:n,touched:a,isSubmitting:o}=e;return(0,C.jsxs)(l.lV,{children:[(0,C.jsxs)(h.A,{dividers:!0,children:[(0,C.jsx)(A.A,{variant:"subtitle1",gutterBottom:!0,children:v.R.t("contactModal.form.mainInfo")}),(0,C.jsx)(l.D0,{as:u.A,label:v.R.t("contactModal.form.name"),name:"name",autoFocus:!0,error:a.name&&Boolean(n.name),helperText:a.name&&n.name,variant:"outlined",margin:"dense",className:S.textField}),(0,C.jsx)(l.D0,{as:u.A,name:"number",label:v.R.t("contactModal.form.number"),error:a.number&&Boolean(n.number),helperText:a.number&&n.number,placeholder:"",variant:"outlined",margin:"dense"}),(0,C.jsx)("div",{children:(0,C.jsx)(l.D0,{as:u.A,label:v.R.t("contactModal.form.email"),name:"email",error:a.email&&Boolean(n.email),helperText:a.email&&n.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})}),(0,C.jsxs)(A.A,{style:{marginBottom:8,marginTop:12},variant:"subtitle1",children:[v.R.t("contactModal.form.whatsapp")," ",null!==E&&void 0!==E&&E.whatsapp?null===E||void 0===E?void 0:E.whatsapp.name:""]}),(0,C.jsx)(A.A,{style:{marginBottom:8,marginTop:12},variant:"subtitle1",children:v.R.t("contactModal.form.extraInfo")}),(0,C.jsx)(l.ED,{name:"extraInfo",children:e=>{let{push:n,remove:a}=e;return(0,C.jsxs)(C.Fragment,{children:[t.extraInfo&&t.extraInfo.length>0&&t.extraInfo.map((e,t)=>(0,C.jsxs)("div",{className:S.extraAttr,children:[(0,C.jsx)(l.D0,{as:u.A,label:v.R.t("contactModal.form.extraName"),name:"extraInfo[".concat(t,"].name"),variant:"outlined",margin:"dense",className:S.textField}),(0,C.jsx)(l.D0,{as:u.A,label:v.R.t("contactModal.form.extraValue"),name:"extraInfo[".concat(t,"].value"),variant:"outlined",margin:"dense",className:S.textField}),(0,C.jsx)(g.A,{size:"small",onClick:()=>a(t),children:(0,C.jsx)(j.A,{})})]},"".concat(t,"-info"))),(0,C.jsx)("div",{className:S.extraAttr,children:(0,C.jsx)(d.A,{style:{flex:1,marginTop:8},variant:"outlined",color:"primary",onClick:()=>n({name:"",value:""}),children:"+ ".concat(v.R.t("contactModal.buttons.addExtraInfo"))})})]})}})]}),(0,C.jsxs)(p.A,{children:[(0,C.jsx)(d.A,{onClick:N,color:"secondary",disabled:o,variant:"outlined",children:v.R.t("contactModal.buttons.cancel")}),(0,C.jsxs)(d.A,{type:"submit",color:"primary",disabled:o,variant:"contained",className:S.btnWrapper,children:["".concat(s?v.R.t("contactModal.buttons.okEdit"):v.R.t("contactModal.buttons.okAdd")),o&&(0,C.jsx)(f.A,{size:24,className:S.buttonProgress})]})]})]})}})]})})}}}]);